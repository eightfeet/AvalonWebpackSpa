/*! v0.1 Thu Mar 10 2016 11:49:36 GMT+0800 (CST) auth by eightfeet */
!function(e){function t(n){if(r[n])return r[n].exports;var a=r[n]={exports:{},id:n,loaded:!1};return e[n].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n=window.webpackJsonp;window.webpackJsonp=function(i,o){for(var s,l,c=0,u=[];c<i.length;c++)l=i[c],a[l]&&u.push.apply(u,a[l]),a[l]=0;for(s in o)e[s]=o[s];for(n&&n(i,o);u.length;)u.shift().call(null,t);return o[0]?(r[0]=0,t(0)):void 0};var r={},a={5:0};return t.e=function(e,n){if(0===a[e])return n.call(null,t);if(void 0!==a[e])a[e].push(n);else{a[e]=[n];var r=document.getElementsByTagName("head")[0],i=document.createElement("script");i.type="text/javascript",i.charset="utf-8",i.async=!0,i.src=t.p+""+e+"."+({0:"index"}[e]||e)+".js",r.appendChild(i)}},t.m=e,t.c=r,t.p="",t(0)}([function(e,t,n){n(5),n(3),n(10),e.exports=n(12)},function(e,t,n){var r,a;r=[n(2)],a=function(){function e(){var e={};"get,post,delete,put".replace(avalon.rword,function(t){e[t]=[]}),this.routingTable=e}function t(e){var t=e.split("?"),n={},r=t[0],a=t[1];if(a)for(var i,o=a.split("&"),s=o.length,l=0;s>l;l++)o[l]&&(i=o[l].split("="),n[decodeURIComponent(i[0])]=decodeURIComponent(i[1]));return{path:r,query:n}}function n(e){if("string"==typeof e)return e;var t=[];for(var n in e)"query"!=n&&t.push(n+"="+encodeURIComponent(e[n]));return t.length?"?"+t.join("&"):""}function r(e,t,n){var r=e.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&");if(!t)return r;var a=n?"?":"";return r+a+"("+t+")"+a}function a(){try{return localStorage.setItem("avalon",1),localStorage.removeItem("avalon"),!0}catch(e){return!1}}function i(e){return String(e).replace(/[,;"\\=\s%]/g,function(e){return encodeURIComponent(e)})}function o(e,t){var n=new Date;n.setTime(n.getTime()+864e5),document.cookie=i(e)+"="+i(t)+";expires="+n.toGMTString()}function s(e){var t=String(document.cookie).match(new RegExp("(?:^| )"+e+"(?:(?:=([^;]*))|;|$)"))||["",""];return decodeURIComponent(t[1])}var l=/([:*])(\w+)|\{(\w+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g;if(e.prototype={error:function(e){this.errorback=e},_pathToRegExp:function(e,t){for(var n,a,i,o,s=t.keys=[],c="^",u=0;n=l.exec(e);){a=n[2]||n[3],i=n[4]||("*"==n[1]?".*":"string"),o=e.substring(u,n.index);var f=this.$types[i],d={name:a};f&&(i=f.pattern,d.decode=f.decode),s.push(d),c+=r(o,i,!1),u=l.lastIndex}o=e.substring(u),c+=r(o)+(t.strict?t.last:"/?")+"$";var h="boolean"==typeof t.caseInsensitive?t.caseInsensitive:!0;return t.regexp=new RegExp(c,h?"i":void 0),t},add:function(e,t,n,r){var a=this.routingTable[e.toLowerCase()];if("/"!==t.charAt(0))throw"path必须以/开头";r=r||{},r.callback=n,t.length>2&&"/"===t.charAt(t.length-1)&&(t=t.slice(0,-1),r.last="/"),avalon.Array.ensure(a,this._pathToRegExp(t,r))},route:function(e,t,n){t=t.trim();for(var r,a=this.routingTable[e],i=0;r=a[i++];){var o=t.match(r.regexp);if(o){r.query=n||{},r.path=t,r.params={};var s=r.keys;return o.shift(),s.length&&this._parseArgs(o,r),r.callback.apply(r,o)}}this.errorback&&this.errorback()},_parseArgs:function(e,t){for(var n=t.keys,r=0,a=n.length;a>r;r++){var i=n[r],o=e[r]||"";if("function"==typeof i.decode)var s=i.decode(o);else try{s=JSON.parse(o)}catch(l){s=o}e[r]=t.params[i.name]=s}},getLastPath:function(){return s("msLastPath")},setLastPath:function(e){o("msLastPath",e)},redirect:function(e){this.navigate(e,{replace:!0})},navigate:function(e,n){var r=t(("/"!==e.charAt(0)?"/":"")+e),n=n||{};"/"===e.charAt(0)&&(e=e.slice(1)),avalon.state&&!n.silent||avalon.history&&avalon.history.updateLocation(e,avalon.mix({},n,{silent:!0})),n.silent||this.route("get",r.path,r.query,n)},when:function(e,t){var n=this,e=e instanceof Array?e:[e];return avalon.each(e,function(e,r){n.add("get",r,function(){var e=n.urlFormate(t,this.params,this.query);n.navigate(e.path+e.query,{replace:!0})})}),this},get:function(e,t){},urlFormate:function(e,t,r){var r=r?n(r):"",a=e.replace(l,function(e){var n=e.replace(/[\{\}]/g,"").split(":");return n=n[0]?n[0]:n[1],t[n]||""}).replace(/^\//g,"");return{path:a,query:r}},$types:{date:{pattern:"[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])",decode:function(e){return new Date(e.replace(/\-/g,"/"))}},string:{pattern:"[^\\/]*"},bool:{decode:function(e){return 0!==parseInt(e,10)},pattern:"0|1"},"int":{decode:function(e){return parseInt(e,10)},pattern:"\\d+"}}},"get,put,delete,post".replace(avalon.rword,function(t){return e.prototype[t]=function(e,n,r){this.add(t,e,n,r)}}),a()){e.prototype.getLastPath=function(){return localStorage.getItem("msLastPath")};var c;e.prototype.setLastPath=function(e){c&&clearTimeout(c),localStorage.setItem("msLastPath",e),c=setTimeout(function(){localStorage.removItem("msLastPath")},864e5)}}return avalon.router=new e,avalon}.apply(t,r),!(void 0!==a&&(e.exports=a))},function(e,t,n){var r,a;r=[n(3)],a=function(e){function t(e){return!e||e===window.name||"_self"===e||"top"===e&&window==window.top}function n(e){for(var t,n=0;t=e[n++];)if("A"===t.nodeName)return t}function r(e,t){(t=document.getElementById(e))?t.scrollIntoView():(t=n(document.getElementsByName(e)))?t.scrollIntoView():window.scrollTo(0,0)}var a=document.createElement("a"),i=e.History=function(){this.location=location};i.started=!1,i.IEVersion=function(){var e=document.documentMode;return e?e:window.XMLHttpRequest?7:6}(),i.defaults={basepath:"/",html5Mode:!1,hashPrefix:"!",iframeID:null,interval:50,fireAnchor:!0};var o=window.VBArray&&i.IEVersion<=7,s=!!window.history.pushState,l=!(!("onhashchange"in window)||window.VBArray&&o);return i.prototype={constructor:i,getFragment:function(e){return null==e&&(e="popstate"===this.monitorMode?this.getPath():this.getHash()),e.replace(/^[#\/]|\s+$/g,"")},getHash:function(e){var t=(e||this).location.href;return this._getHash(t.slice(t.indexOf("#")))},_getHash:function(e){return 0===e.indexOf("#/")?decodeURIComponent(e.slice(2)):0===e.indexOf("#!/")?decodeURIComponent(e.slice(3)):""},getPath:function(){var e=decodeURIComponent(this.location.pathname+this.location.search),t=this.basepath.slice(0,-1);return e.indexOf(t)||(e=e.slice(t.length)),e.slice(1)},_getAbsolutePath:function(e){return e.hasAttribute?e.href:e.getAttribute("href",4)},start:function(t){function n(e){var t=r.iframe;if("iframepoll"===r.monitorMode&&!t)return!1;var n,a=r.getFragment();if(t){var i=r.getHash(t);a!==r.fragment?(r._setIframeHistory(r.prefix+a),n=a):i!==r.fragment&&(r.location.hash=r.prefix+i,n=i)}else a!==r.fragment&&(n=a);void 0!==n&&(r.fragment=n,r.fireRouteChange(n,{fromHistory:!0}))}if(i.started)throw new Error("avalon.history has already been started");i.started=!0,this.options=e.mix({},i.defaults,t),this.html5Mode=!!this.options.html5Mode,this.monitorMode=this.html5Mode?"popstate":"hashchange",s||(this.html5Mode&&(e.log("如果浏览器不支持HTML5 pushState，强制使用hash hack!"),this.html5Mode=!1),this.monitorMode="hashchange"),l||(this.monitorMode="iframepoll"),this.prefix="#"+this.options.hashPrefix+"/",this.basepath=("/"+this.options.basepath+"/").replace(/^\/+|\/+$/g,"/"),this.fragment=this.getFragment(),a.href=this.basepath,this.rootpath=this._getAbsolutePath(a);var r=this,o="<!doctype html><html><body>@</body></html>";switch(this.options.domain&&(o=o.replace("<body>","<script>document.domain ="+this.options.domain+"</script><body>")),this.iframeHTML=o,"iframepoll"===this.monitorMode&&e.ready(function(){if(!r.iframe){var e=r.iframe||document.getElementById(r.iframeID)||document.createElement("iframe");e.src="javascript:0",e.style.display="none",e.tabIndex=-1,document.body.appendChild(e),r.iframe=e.contentWindow,r._setIframeHistory(r.prefix+r.fragment)}}),this.monitorMode){case"popstate":this.checkUrl=e.bind(window,"popstate",n),this._fireLocationChange=n;break;case"hashchange":this.checkUrl=e.bind(window,"hashchange",n);break;case"iframepoll":this.checkUrl=setInterval(n,this.options.interval)}e.ready(function(){r.fireRouteChange(r.fragment||"/",{replace:!0})})},fireRouteChange:function(t,n){var a=e.router;a&&a.navigate&&(a.setLastPath(t),a.navigate("/"===t?t:"/"+t,n)),this.options.fireAnchor&&r(t.replace(/\?.*/g,""))},stop:function(){e.unbind(window,"popstate",this.checkUrl),e.unbind(window,"hashchange",this.checkUrl),clearInterval(this.checkUrl),i.started=!1},updateLocation:function(e,t,n){var t=t||{},r=t.replace,a=t.silent;if("popstate"===this.monitorMode){var i=this.rootpath+e+(n||"");i!=this.location.href.split("#")[0]&&history[r?"replaceState":"pushState"]({path:i},document.title,i),a||this._fireLocationChange()}else{var o=this.prefix+e;a&&e!=this.getHash()&&(this._setIframeHistory(o,r),this.fragment=this._getHash(o)),this._setHash(this.location,o,r)}},_setHash:function(e,t,n){var r=e.href.replace(/(javascript:|#).*$/,"");n?e.replace(r+t):e.hash=t},_setIframeHistory:function(e,t){if(this.iframe){var n=this.iframe.document;n.open(),n.write(this.iframeHTML),n.close(),this._setHash(n.location,e,t)}}},e.history=new i,e.bind(document,"click",function(n){var r="defaultPrevented"in n?n.defaultPrevented:n.returnValue===!1;if(!(r||n.ctrlKey||n.metaKey||2===n.which)){for(var a=n.target;"A"!==a.nodeName;)if(a=a.parentNode,!a||"BODY"===a.tagName)return;if(t(a.target)){var i=o?a.getAttribute("href",2):a.getAttribute("href")||a.getAttribute("xlink:href"),s=e.history.prefix;if(null===i)return;var l=i.replace(s,"").trim();0===i.indexOf(s)&&""!==l&&(n.preventDefault(),e.router&&e.router.navigate(l))}}}),e}.apply(t,r),!(void 0!==a&&(e.exports=a))},function(e,t,n){var r,a;!function(t,n){"object"==typeof e&&"object"==typeof e.exports?e.exports=t.document?n(t,!0):function(e){if(!e.document)throw new Error("Avalon requires a window with a document");return n(e)}:n(t)}("undefined"!=typeof window?window:this,function(n,i){function o(){avalon.config.debug&&console.log.apply(console,arguments)}function s(){return Object.create(null)}function l(){}function c(e,t){"string"==typeof e&&(e=e.match(Se)||[]);for(var n={},r=void 0!==t?t:1,a=0,i=e.length;i>a;a++)n[e[a]]=r;return n}function u(){if(n.VBArray){var e=document.documentMode;return e?e:n.XMLHttpRequest?7:6}return NaN}function f(e){if(e&&"object"==typeof e){var t=e.length,n=je.call(e);if(/(Array|List|Collection|Map|Arguments)\]$/.test(n))return!0;if("[object Object]"===n&&t===t>>>0)return!0}return!1}function d(e,t){if(e&&e.childNodes)for(var n,r=e.childNodes,a=0;n=r[a++];)if(n.tagName){var i=xe.createElementNS(ze,n.tagName.toLowerCase());Le.forEach.call(n.attributes,function(e){i.setAttribute(e.name,e.value)}),d(n,i),t.appendChild(i)}}function h(e){for(var t in e)if(Oe.call(e,t)){var n=e[t];"function"==typeof h.plugins[t]?h.plugins[t](n):"object"==typeof h[t]?avalon.mix(h[t],n):h[t]=n}return this}function p(e){return(e+"").replace(et,"\\$&")}function v(e,t,n){if(Array.isArray(e)){var r=e.concat();e.length=0;var a=T(e);return a.pushArray(r),a}if(!e||e.$id&&e.$events||e.nodeName&&e.nodeType>0)return e;var i=Array.isArray(e.$skipArray)?e.$skipArray:[];i.$special=t||s();var o={};n=n||{};var l=s(),c=s(),u=[];it.forEach(function(t){delete e[t]});var f=Object.keys(e);f.forEach(function(t,r){var a=e[t];if(n[t]=a,E(t,a,i)){l[t]=[];var o=avalon.type(a);"object"===o&&Ve(a.get)&&Object.keys(a).length<=2?(r=b(t,a),u.push(r)):r=ke.test(o)?w(t,a,o,l[t],n):y(t,a),c[t]=r}}),o=Object.defineProperties(o,st(c));for(var d=0;d<f.length;d++){var h=f[d];c[h]||(o[h]=e[h])}m(o,"$id",Fe()),m(o,"$model",n),m(o,"$events",l),m(o,"hasOwnProperty",function(e){return e in this.$model});for(d in rt)m(o,d,rt[d]);return o.$reinitialize=function(){u.forEach(function(e){delete e._value,delete e.oldArgs,e.digest=function(){e.call(o)},ut.begin({callback:function(t,n){var r=n._name;if(n!==e){var a=t.$events[r];e.vm=o,A(a,e.digest)}}});try{e.get.call(o)}finally{ut.end()}})},o.$reinitialize(),o}function m(e,t,n){Object.defineProperty(e,t,{value:n,writable:!0,enumerable:!1,configurable:!0})}function g(e){for(var t=Object.keys(e),n=0;n<it.length;n++){var r=t.indexOf(it[n]);-1!==r&&t.splice(r,1)}return t}function y(e,t){function n(e){var t=n._value;return arguments.length>0?(Te||ot(e,t)||(n.updateValue(this,e),n.notify(this,e,t)),this):(ut.collectDependency(this,n),t)}return C(n,e),n._value=t,n}function b(e,t){function n(t){var r=n._value,a="_value"in n;if(arguments.length>0){if(Te)return this;if("function"==typeof n.set&&n.oldArgs!==t){n.oldArgs=t;var i=this.$events,o=i[e];i[e]=[],n.set.call(this,t),i[e]=o,t=n.get.call(this),t!==r&&(n.updateValue(this,t),n.notify(this,t,r))}return this}return t=n.get.call(this),n.updateValue(this,t),a&&r!==t&&n.notify(this,t,r),t}return n.set=t.set,n.get=t.get,C(n,e),n}function w(e,t,n,r,a){function i(t){var r=i._value,a=i._vmodel;if(arguments.length>0){if(Te)return this;if("array"===n){var o=a,s=t,l=o.length,c=s.length;o.$lock=!0,l>c?o.splice(c,l-c):c>l&&o.push.apply(o,s.slice(l));for(var u=Math.min(l,c),f=0;u>f;f++)o.set(f,s[f]);delete o.$lock,o._fire("set")}else if("object"===n){t=t.$model?t.$model:t;var d=this.$events[e]||[],h=avalon.mix(!0,{},t);for(f in a)a.hasOwnProperty(f)&&Oe.call(h,f)&&(a[f]=h[f]);a=i._vmodel=v(t),a.$events[Ee]=d,d.length&&d.forEach(function(e){e.type&&(e.rollback&&e.rollback(),qe[e.type](e,e.vmodels))})}return i.updateValue(this,a.$model),i.notify(this,this._value,r),this}return ut.collectDependency(this,i),a}C(i,e),Array.isArray(t)?a[e]=t:a[e]=a[e]||{};var o=i._vmodel=v(t,0,a[e]);return o.$events[Ee]=r,i}function x(e,t){e.$model[this._name]=this._value=t}function $(e,t,n){var r=this._name,a=e.$events[r];a&&(N(a),rt.$fire.call(e,r,t,n))}function C(e,t){e._name=t,e.updateValue=x,e.notify=$}function E(e,t,n){if(Ve(t)||t&&t.nodeName&&t.nodeType>0)return!1;if(-1!==n.indexOf(e))return!1;var r=n.$special;return!e||"$"!==e.charAt(0)||r[e]}function T(e){var t=[];t.$id=Fe(),t.$model=e,t.$events={},t.$events[Ee]=[],t._=v({length:e.length}),t._.$watch("length",function(e,n){t.$fire("length",e,n)});for(var n in rt)t[n]=rt[n];return avalon.mix(t,ct),t}function S(e,t,n,r,a,i,o){for(var s=this.length,l=2;--l;){switch(e){case"add":var c=this.$model.slice(t,t+n).map(function(e){return ke.test(avalon.type(e))?e.$id?e:v(e,0,e):e});lt.apply(this,[t,0].concat(c)),this._fire("add",t,n);break;case"del":var u=this._splice(t,n);this._fire("del",t,n)}a&&(e=a,t=i,n=o,l=2,a=0)}return this._fire("index",r),this.length!==s&&(this._.length=this.length),u}function k(e,t){for(var n={},r=0,a=t.length;a>r;r++){n[r]=e[r];var i=t[r];i in n?(e[r]=n[i],delete n[i]):e[r]=e[i]}}function A(e,t){t.oneTime||e&&avalon.Array.ensure(e,t)&&t.element&&(O(t,e),new Date-pt>444&&j())}function N(e){if(e&&e.length){new Date-pt>444&&"object"==typeof e[0]&&j();for(var t,n=_e.call(arguments,1),r=e.length;t=e[--r];){var a=t.element;if(a&&a.parentNode)try{var i=t.evaluator;if(t.$repeat)t.handler.apply(t,n);else if("$repeat"in t||!i)qe[t.type](t,t.vmodels);else if("on"!==t.type){var o=i.apply(0,t.args||[]);t.handler(o,a,t)}}catch(s){avalon.log(s)}}}}function M(e,t){return e.uuid||t||(e.uuid=++dt),e.uuid}function O(e,t){var n=e.element;e.uuid||(1!==n.nodeType?e.uuid=e.type+M(n.parentNode)+"-"+ ++dt:e.uuid=e.name+"-"+M(n)),ht[e.uuid]||(e.list=t,e.i=~~e.i,ht[e.uuid]="__",ht.push(e))}function j(e){for(var t=vt||ht.length,n=0;e=ht[--t];)if(e.i<7){if(null===e.element){ht.splice(t,1),e.list&&(avalon.Array.remove(e.list,e),delete ht[e.uuid]);continue}if(e.element&&_(e.element)){if(ht.splice(t,1),avalon.Array.remove(e.list,e),L(e),n++>500){vt=t;break}continue}e.i++,7===e.i&&(e.i=14)}else e.i--;pt=new Date}function L(e){delete ht[e.uuid],e.element=null,e.rollback&&e.rollback();for(var t in e)e[t]=null}function _(e){try{e.parentNode.nodeType}catch(t){return!0}return e.ifRemove&&!He.contains(e.ifRemove)&&Ce===e.parentNode?(e.parentNode&&e.parentNode.removeChild(e),!0):e.msRetain?0:1===e.nodeType?!He.contains(e):!avalon.contains(He,e)}function P(e){return e.replace(/([a-z\d])([A-Z]+)/g,"$1-$2").toLowerCase()}function H(e){return e.indexOf("-")<0&&e.indexOf("_")<0?e:e.replace(/[-_][^-_]/g,function(e){return e.charAt(1).toUpperCase()})}function D(e){try{if("object"==typeof e)return e;e="true"===e?!0:"false"===e?!1:"null"===e?null:+e+""===e?+e:$t.test(e)?JSON.parse(e):e}catch(t){}return e}function I(e){return e.window&&e.document?e:9===e.nodeType?e.defaultView:!1}function R(e,t){if(e.offsetWidth<=0){var n=getComputedStyle(e,null);if(kt.test(n.display)){var r={node:e};for(var a in St)r[a]=n[a],e.style[a]=St[a];t.push(r)}var i=e.parentNode;i&&1===i.nodeType&&R(i,t)}}function F(e){var t=e.tagName.toLowerCase();return"input"===t&&/checkbox|radio/.test(e.type)?"checked":t}function B(e,t,n,r){for(var a,i=[],o=" = "+n+".",s=e.length;a=e[--s];)t.hasOwnProperty(a)&&(i.push(a+o+a),r.vars.push(a),"duplex"===r.type&&(e.get=n+"."+a),e.splice(s,1));return i}function V(e){for(var t=[],n={},r=0;r<e.length;r++){var a=e[r],i=a&&"string"==typeof a.$id?a.$id:a;n[i]||(n[i]=t.push(a))}return t}function q(e,t){return t=t.replace(Bt,"").replace(Vt,function(){return"],|"}).replace(qt,function(e,t){return"["+Nt(t)}).replace(Ut,function(){return'"],["'}).replace(Xt,function(){return'",'})+"]","return this.filters.$filter("+e+", "+t+")"}function U(e,t,n){var r=n.type,a=n.filters||"",i=t.map(function(e){return String(e.$id).replace(Ft,"$1")})+e+r+a,s=Dt(e).concat(),c=[],u=[],f=[],d="";t=V(t),n.vars=[];for(var h=0,p=t.length;p>h;h++)if(s.length){var v="vm"+we+"_"+h;u.push(v),f.push(t[h]),c.push.apply(c,B(s,t[h],v,n))}if(c.length||"duplex"!==r){"duplex"!==r&&(e.indexOf("||")>-1||e.indexOf("&&")>-1)&&n.vars.forEach(function(t){var n=new RegExp("\\b"+t+"(?:\\.\\w+|\\[\\w+\\])+","ig");e=e.replace(n,function(n,r){var a=n.charAt(t.length),i=e.slice(r+n.length),o=/^\s*\(/.test(i);if("."===a||"["===a||o){var s="var"+String(Math.random()).replace(/^0\./,"");if(o){var l=n.split(".");if(l.length>2){var u=l.pop();return c.push(s+" = "+l.join(".")),s+"."+u}return n}return c.push(s+" = "+n),s}return n})}),n.args=f,delete n.vars;var m=It.get(i);if(m)return void(n.evaluator=m);if(d=c.join(", "),d&&(d="var "+d),/\S/.test(a)){if(!/text|html/.test(n.type))throw Error("ms-"+n.type+"不支持过滤器");e="\nvar ret"+we+" = "+e+";\r\n",e+=q("ret"+we,a);try{m=Function.apply(l,u.concat("'use strict';\n"+d+e)),n.evaluator=It.put(i,function(){return m.apply(avalon,arguments)})}catch(g){o("debug: parse error,"+g.message)}return void(s=c=u=null)}if("duplex"===r){var y="'use strict';\nreturn function(vvv){\n	"+d+";\n	if(!arguments.length){\n		return "+e+"\n	}\n	"+(Rt.test(e)?e:s.get)+"= vvv;\n} ";try{m=Function.apply(l,u.concat(y)),n.evaluator=It.put(i,m)}catch(g){o("debug: parse error,"+g.message)}return void(s=c=u=null)}if("on"===r){-1===e.indexOf("(")?e+=".call(this, $event)":e=e.replace("(",".call(this,"),u.push("$event"),e="\nreturn "+e+";";var b=e.lastIndexOf("\nreturn"),w=e.slice(0,b),x=e.slice(b);e=w+"\n"+x}else e="\nreturn "+e+";";try{m=Function.apply(l,u.concat("'use strict';\n"+d+e)),n.evaluator=It.put(i,m)}catch(g){o("debug: parse error,"+g.message)}s=c=u=null}}function X(e){var t=Ge.test(e);if(t){var n=ne(e);return 1===n.length?n[0].value:n.map(function(e){return e.expr?"("+e.value+")":Nt(e.value)}).join(" + ")}return e}function z(e,t,n,r){e=e||"",U(e,t,n),n.evaluator&&!r&&(n.handler=Ue[n.handlerName||n.type],avalon.injectBinding(n))}function Y(e,t,n){var r=setTimeout(function(){var a=e.innerHTML;clearTimeout(r),a===n?t():Y(e,t,a)})}function W(e,t){var n=e.getAttribute("avalonctrl")||t.$id;e.setAttribute("avalonctrl",n),t.$events.expr=e.tagName+'[avalonctrl="'+n+'"]'}function Z(e,t){for(var n,r=0;n=e[r++];)n.vmodels=t,qe[n.type](n,t),n.evaluator&&n.element&&1===n.element.nodeType&&n.element.removeAttribute(n.name);e.length=0}function J(e,t){return e.priority-t.priority}function G(e,t,n){var r=!0;if(t.length){for(var a,i=e.attributes,l=[],c=[],u={},f=s(),d=0;a=i[d++];)if(a.specified&&(n=a.name.match(Jt))){var h=n[1],p=n[2]||"",v=a.value,m=a.name;if(u[m])continue;if(u[m]=1,Kt[h]?(p=h,h="on"):Qt[h]&&("enabled"===h&&(o("warning!ms-enabled或ms-attr-enabled已经被废弃"),h="disabled",v="!("+v+")"),p=h,h="attr",m="ms-"+h+"-"+p,c.push([a.name,m,v])),f[m]=v,"function"==typeof qe[h]){var g=v.replace(Zt,""),y=v!==g,b={type:h,param:p,element:e,name:m,value:g,oneTime:y,priority:(Gt[h]||10*h.charCodeAt(0))+(Number(p.replace(/\D/g,""))||0)};if("html"===h||"text"===h){var w=te(v);avalon.mix(b,w),b.filters=b.filters.replace(nn,function(){return b.type="html",b.group=1,""})}else if("duplex"===h)var x=m;else"ms-if-loop"===m&&(b.priority+=100);l.push(b),"widget"===h&&(e.msData=e.msData||f)}}if(l.length){l.sort(J),c.forEach(function(t){o("warning!请改用"+t[1]+"代替"+t[0]+"!"),e.removeAttribute(t[0]),e.setAttribute(t[1],t[2])});var $=e.type;for($&&x&&f["ms-attr-value"]&&"text"===e.type&&o("warning!"+$+"控件不能同时定义ms-attr-value与"+x),d=0;b=l[d];d++){if(h=b.type,en.test(h))return Z(l.slice(0,d+1),t);r&&(r=!tn.test(h))}Z(l,t)}}r&&!zt[e.tagName]&&Qe.test(e.innerHTML+e.textContent)&&(Wt&&Wt(e),K(e,t))}function K(e,t){var n=avalon.slice(e.childNodes);Q(n,t)}function Q(e,t){for(var n,r=0;n=e[r++];)switch(n.nodeType){case 1:ee(n,t),n.msCallback&&(n.msCallback(),n.msCallback=void 0);break;case 3:Ge.test(n.nodeValue)&&re(n,t,r)}}function ee(e,t,n){var r=e.getAttribute("ms-skip"),a=e.getAttributeNode("ms-important"),i=e.getAttributeNode("ms-controller");if("string"!=typeof r){if(n=a||i){var o=avalon.vmodels[n.value];if(!o)return;t=n===a?[o]:[o].concat(t),e.removeAttribute(n.name),e.classList.remove(n.name),W(e,o)}G(e,t)}}function te(e){if(e.indexOf("|")>0){var t=e.replace(an,function(e){return Array(e.length+1).join("1")}),n=t.replace(rn,"ᄢ㍄").indexOf("|");if(n>-1)return{filters:e.slice(n),value:e.slice(0,n),expr:!0}}return{value:e,filters:"",expr:!0}}function ne(e){for(var t,n,r=[],a=0;;){if(n=e.indexOf(Ze,a),-1===n)break;if(t=e.slice(a,n),t&&r.push({value:t,filters:"",expr:!1}),a=n+Ze.length,n=e.indexOf(Je,a),-1===n)break;t=e.slice(a,n),t&&r.push(te(t.replace(on,""))),a=n+Je.length}return t=e.slice(a),t&&r.push({value:t,expr:!1,filters:""}),r}function re(e,t){var n=[],r=ne(e.data);if(r.length){for(var a,i=0;a=r[i++];){var o=xe.createTextNode(a.value);a.expr&&(a.value=a.value.replace(Zt,function(){return a.oneTime=!0,""}),a.type="text",a.element=o,a.filters=a.filters.replace(nn,function(e,t,n){return a.type="html",""}),n.push(a)),De.appendChild(o)}e.parentNode.replaceChild(De,e),n.length&&Z(n,t)}}function ae(e,t,n){var r=e.templateCache&&e.templateCache[t];if(r){for(var a,i=xe.createDocumentFragment();a=r.firstChild;)i.appendChild(a);return i}return avalon.parseHTML(n)}function ie(e){return null==e?"":e}function oe(e,t,n,r){return t.param.replace(/\w+/g,function(r){var a=avalon.duplexHooks[r];a&&"function"==typeof a[n]&&(e=a[n](e,t))}),e}function se(){for(var e=gn.length-1;e>=0;e--){var t=gn[e];t()===!1&&gn.splice(e,1)}gn.length||clearInterval(mn)}function le(e,t,n,r){var a=e.template.cloneNode(!0),i=avalon.slice(a.childNodes);a.insertBefore(xe.createComment(e.signature),a.firstChild),t.appendChild(a);var o=[n].concat(e.vmodels),s={nodes:i,vmodels:o};r.push(s)}function ce(e){for(var t,n=[],r=e.element.parentNode.childNodes,a=0;t=r[a++];)if(t.nodeValue===e.signature)n.push(t);else if(t.nodeValue===e.signature+":end")break;return n}function ue(e,t,n){for(;;){var r=t.previousSibling;if(!r)break;if(r.parentNode.removeChild(r),n&&n.call(r),r===e)break}}function fe(){var e=v({$key:"",$outer:{},$host:{},$val:{get:function(){return this.$host[this.$key]},set:function(e){this.$host[this.$key]=e}}},{$val:1});return e.$id=Fe("$proxy$with"),e}function de(e,t,n){e=e||xn.pop(),e?e.$reinitialize():e=fe();var r=n.$repeat;return e.$key=t,e.$host=r,e.$outer=n.$outer,r.$events?e.$events.$val=r.$events[t]:e.$events={},e}function he(e){pe(e)}function pe(e){e.forEach(function(e){ge(e,$n)}),e.length=0}function ve(e){var t={$host:[],$outer:{},$index:0,$first:!1,$last:!1,$remove:avalon.noop};t[e]={get:function(){var t=this.$events,n=t.$index;t.$index=t[e];try{return this.$host[this.$index]}finally{t.$index=n}},set:function(e){try{var t=this.$events,n=t.$index;t.$index=[],this.$host.set(this.$index,e)}finally{t.$index=n}}};var n={$last:1,$first:1,$index:1},r=v(t,n);return r.$id=Fe("$proxy$each"),r}function me(e,t){for(var n,r=t.param||"el",a=0,i=$n.length;i>a;a++){var o=$n[a];o&&o.hasOwnProperty(r)&&(n=o,$n.splice(a,1))}n||(n=ve(r));var s=t.$repeat,l=s.length-1;return n.$index=e,n.$first=0===e,n.$last=e===l,n.$host=s,n.$outer=t.$outer,n.$remove=function(){return s.removeAt(n.$index)},n}function ge(e,t){for(var n in e.$events){var r=e.$events[n];Array.isArray(r)&&(r.forEach(function(e){"object"==typeof e&&L(e)}),r.length=0)}e.$host=e.$outer={},t.unshift(e)>h.maxRepeatSize&&t.pop()}function ye(e,t){var n="_"+e;if(!ye[n]){var r=xe.createElement(e);He.appendChild(r),t=Pe?getComputedStyle(r,null).display:r.currentStyle.display,He.removeChild(r),ye[n]=t}return ye[n]}function be(e,t,n,r){e=(e+"").replace(/[^0-9+\-Ee.]/g,"");var a=isFinite(+e)?+e:0,i=isFinite(+t)?Math.abs(t):3,o=r||",",s=n||".",l="",c=function(e,t){var n=Math.pow(10,t);return""+(Math.round(e*n)/n).toFixed(t)};return l=(i?c(a,i):""+Math.round(a)).split("."),l[0].length>3&&(l[0]=l[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,o)),(l[1]||"").length<i&&(l[1]=l[1]||"",l[1]+=new Array(i-l[1].length+1).join("0")),l.join(s)}var we=Date.now(),xe=n.document,$e=xe.head;$e.insertAdjacentHTML("afterBegin",'<avalon ms-skip class="avalonHide"><style id="avalonStyle">.avalonHide{ display: none!important }</style></avalon>');var Ce=$e.firstChild,Ee="$"+we,Te=!1,Se=/[^, ]+/g,ke=/^(?:object|array)$/,Ae=/^\[object SVG\w*Element\]$/,Ne=/^\[object (?:Window|DOMWindow|global)\]$/,Me=Object.prototype,Oe=Me.hasOwnProperty,je=Me.toString,Le=Array.prototype,_e=Le.slice,Pe=n.dispatchEvent,He=xe.documentElement,De=xe.createDocumentFragment(),Ie=xe.createElement("div"),Re={};"Boolean Number String Function Array Date RegExp Object Error".replace(Se,function(e){Re["[object "+e+"]"]=e.toLowerCase()});var Fe=function(e){return e=e||"avalon",String(Math.random()+Math.random()).replace(/\d\.\d{4}/,e)},Be=u();avalon=function(e){return new avalon.init(e)},avalon.profile=function(){n.console&&avalon.config.profile&&Function.apply.call(console.log,console,arguments)},avalon.nextTick=new function(){function e(){for(var e=a.length,t=0;e>t;t++)a[t]();a=a.slice(e)}var t=n.setImmediate,r=n.MutationObserver;if(t)return t.bind(n);var a=[];if(r){var i=document.createTextNode("avalon");return new r(e).observe(i,{characterData:!0}),function(e){a.push(e),i.data=Math.random()}}return n.VBArray?function(t){a.push(t);var n=xe.createElement("script");n.onreadystatechange=function(){e(),n.onreadystatechange=null,$e.removeChild(n),n=null},$e.appendChild(n)}:function(e){setTimeout(e,4)}},avalon.init=function(e){this[0]=this.element=e},avalon.fn=avalon.prototype=avalon.init.prototype,avalon.type=function(e){return null==e?String(e):"object"==typeof e||"function"==typeof e?Re[je.call(e)]||"object":typeof e};var Ve=function(e){return"[object Function]"===je.call(e)};avalon.isFunction=Ve,avalon.isWindow=function(e){return Ne.test(je.call(e))},avalon.isPlainObject=function(e){return"[object Object]"===je.call(e)&&Object.getPrototypeOf(e)===Me},avalon.mix=avalon.fn.mix=function(){var e,t,n,r,a,i,o=arguments[0]||{},s=1,l=arguments.length,c=!1;for("boolean"==typeof o&&(c=o,o=arguments[1]||{},s++),"object"==typeof o||Ve(o)||(o={}),s===l&&(o=this,s--);l>s;s++)if(null!=(e=arguments[s]))for(t in e)n=o[t],r=e[t],o!==r&&(c&&r&&(avalon.isPlainObject(r)||(a=Array.isArray(r)))?(a?(a=!1,i=n&&Array.isArray(n)?n:[]):i=n&&avalon.isPlainObject(n)?n:{},o[t]=avalon.mix(c,i,r)):void 0!==r&&(o[t]=r));return o},avalon.mix({rword:Se,subscribers:Ee,version:1.472,ui:{},log:o,slice:function(e,t,n){return _e.call(e,t,n)},noop:l,error:function(e,t){throw new(t||Error)(e)},oneObject:c,range:function(e,t,n){n||(n=1),null==t&&(t=e||0,e=0);for(var r=-1,a=Math.max(0,Math.ceil((t-e)/n)),i=new Array(a);++r<a;)i[r]=e,e+=n;return i},eventHooks:{},bind:function(e,t,n,r){var a=avalon.eventHooks,i=a[t];return"object"==typeof i&&(t=i.type||t,r=i.phase||!!r,n=i.fn?i.fn(e,n):n),e.addEventListener(t,n,r),n},unbind:function(e,t,n,r){var a=avalon.eventHooks,i=a[t],o=n||l;"object"==typeof i&&(t=i.type||t,r=i.phase||!!r),e.removeEventListener(t,o,r)},css:function(e,t,n){e instanceof avalon&&(e=e[0]);var r,a=/[_-]/.test(t)?H(t):t;if(t=avalon.cssName(a)||a,void 0===n||"boolean"==typeof n){r=Ct[a+":get"]||Ct["@:get"],"background"===t&&(t="backgroundColor");var i=r(e,t);return n===!0?parseFloat(i)||0:i}if(""===n)e.style[t]="";else{if(null==n||n!==n)return;isFinite(n)&&!avalon.cssNumber[a]&&(n+="px"),r=Ct[a+":set"]||Ct["@:set"],r(e,t,n)}},each:function(e,t){if(e){var n=0;if(f(e))for(var r=e.length;r>n&&t(n,e[n])!==!1;n++);else for(n in e)if(e.hasOwnProperty(n)&&t(n,e[n])===!1)break}},getWidgetData:function(e,t){var n=avalon(e).data(),r={};for(var a in n)0===a.indexOf(t)&&(r[a.replace(t,"").replace(/\w/,function(e){return e.toLowerCase()})]=n[a]);return r},Array:{ensure:function(e,t){return-1===e.indexOf(t)?e.push(t):void 0},removeAt:function(e,t){return!!e.splice(t,1).length},remove:function(e,t){var n=e.indexOf(t);return~n?avalon.Array.removeAt(e,n):!1}}});var qe=avalon.bindingHandlers={},Ue=avalon.bindingExecutors={},Xe=new function(){function e(e){this.size=0,this.limit=e,this.head=this.tail=void 0,this._keymap={}}var t=e.prototype;return t.put=function(e,t){var n={key:e,value:t};return this._keymap[e]=n,this.tail?(this.tail.newer=n,n.older=this.tail):this.head=n,this.tail=n,this.size===this.limit?this.shift():this.size++,t},t.shift=function(){var e=this.head;e&&(this.head=this.head.newer,this.head.older=e.newer=e.older=this._keymap[e.key]=void 0,delete this._keymap[e.key])},t.get=function(e){var t=this._keymap[e];if(void 0!==t)return t===this.tail?t.value:(t.newer&&(t===this.head&&(this.head=t.newer),t.newer.older=t.older),t.older&&(t.older.newer=t.newer),t.newer=void 0,t.older=this.tail,this.tail&&(this.tail.newer=t),this.tail=t,t.value)},e};if(xe.contains||(Node.prototype.contains=function(e){return!!(16&this.compareDocumentPosition(e))}),avalon.contains=function(e,t){try{for(;t=t.parentNode;)if(t===e)return!0;return!1}catch(n){return!1}},n.SVGElement){var ze="http://www.w3.org/2000/svg",Ye=xe.createElementNS(ze,"svg");Ye.innerHTML='<circle cx="50" cy="50" r="40" fill="red" />',Ae.test(Ye.firstChild)||Object.defineProperties(SVGElement.prototype,{outerHTML:{enumerable:!0,configurable:!0,get:function(){return(new XMLSerializer).serializeToString(this)},set:function(e){var t=this.tagName.toLowerCase(),n=this.parentNode,r=avalon.parseHTML(e);if("svg"===t)n.insertBefore(r,this);else{var a=xe.createDocumentFragment();d(r,a),n.insertBefore(a,this)}n.removeChild(this)}},innerHTML:{enumerable:!0,configurable:!0,get:function(){var e=this.outerHTML,t=new RegExp("<"+this.nodeName+'\\b(?:(["\'])[^"]*?(\\1)|[^>])*>',"i"),n=new RegExp("</"+this.nodeName+">$","i");return e.replace(t,"").replace(n,"")},set:function(e){if(avalon.clearHTML){avalon.clearHTML(this);var t=avalon.parseHTML(e);d(t,this)}}}})}var We=avalon.eventHooks;"onmouseenter"in He||avalon.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){We[e]={type:t,deel:function(t,n,r){return function(n){var a=n.relatedTarget;return a&&(a===t||16&t.compareDocumentPosition(a))?void 0:(delete n.type,n.type=e,r.call(t,n))}}}}),avalon.each({AnimationEvent:"animationend",WebKitAnimationEvent:"webkitAnimationEnd"},function(e,t){n[e]&&!We.animationend&&(We.animationend={type:t})}),void 0===xe.onmousewheel&&(We.mousewheel={type:"wheel",fn:function(e,t){return function(n){n.wheelDeltaY=n.wheelDelta=n.deltaY>0?-120:120,n.wheelDeltaX=0,Object.defineProperty(n,"type",{value:"mousewheel"}),t.call(e,n)}}});var Ze,Je,Ge,Ke,Qe,et=/[-.*+?^${}()|[\]\/\\]/g,tt={interpolate:function(e){if(Ze=e[0],Je=e[1],Ze===Je)throw new SyntaxError("openTag===closeTag");var t=Ze+"test"+Je;if(Ie.innerHTML=t,Ie.innerHTML!==t&&Ie.innerHTML.indexOf("&lt;")>-1)throw new SyntaxError("此定界符不合法");h.openTag=Ze,h.closeTag=Je,Ie.innerHTML="";var n=p(Ze),r=p(Je);Ge=new RegExp(n+"([\\s\\S]*)"+r),Ke=new RegExp(n+"([\\s\\S]*)"+r,"g"),Qe=new RegExp(n+"[\\s\\S]*"+r+"|\\sms-")}};h.debug=!0,h.plugins=tt,h.plugins.interpolate(["{{","}}"]),h.paths={},h.shim={},h.maxRepeatSize=100,avalon.config=h;
var nt=function(e){return xe.querySelectorAll(e)},rt={$watch:function(e,t){if("function"==typeof t){var n=this.$events[e];n?n.push(t):this.$events[e]=[t]}else this.$events=this.$watch.backup;return this},$unwatch:function(e,t){var n=arguments.length;if(0===n)this.$watch.backup=this.$events,this.$events={};else if(1===n)this.$events[e]=[];else for(var r=this.$events[e]||[],a=r.length;~--a<0;)if(r[a]===t)return r.splice(a,1);return this},$fire:function(e){var t,n,r,a;/^(\w+)!(\S+)$/.test(e)&&(t=RegExp.$1,e=RegExp.$2);var i=this.$events;if(i){var o=_e.call(arguments,1),s=[e].concat(o);if("all"===t)for(n in avalon.vmodels)r=avalon.vmodels[n],r!==this&&r.$fire.apply(r,s);else if("up"===t||"down"===t){var l=i.expr?nt(i.expr):[];if(0===l.length)return;for(n in avalon.vmodels)if(r=avalon.vmodels[n],r!==this&&r.$events.expr){var c=nt(r.$events.expr);if(0===c.length)continue;Le.forEach.call(c,function(e){Le.forEach.call(l,function(n){var a="down"===t?n.contains(e):e.contains(n);a&&(e._avalon=r)})})}var u=xe.getElementsByTagName("*"),f=[];for(Le.forEach.call(u,function(e){e._avalon&&(f.push(e._avalon),e._avalon="",e.removeAttribute("_avalon"))}),"up"===t&&f.reverse(),n=0;(a=f[n++])&&a.$fire.apply(a,s)!==!1;);}else{var d=i[e]||[],h=i.$all||[];for(n=0;a=d[n++];)Ve(a)&&a.apply(this,o);for(n=0;a=h[n++];)Ve(a)&&a.apply(this,arguments)}}}},at=avalon.vmodels={};avalon.define=function(e,t){var n=e.$id||e;if(n||o("warning: vm必须指定$id"),at[n]&&o("warning: "+n+" 已经存在于avalon.vmodels中"),"object"==typeof e)var r=v(e);else{var a={$watch:l};t(a),r=v(a),Te=!0,t(r),Te=!1}return r.$id=n,at[n]=r};var it=String("$id,$watch,$unwatch,$fire,$events,$model,$skipArray,$reinitialize").match(Se),ot=Object.is||function(e,t){return 0===e&&0===t?1/e===1/t:e!==e?t!==t:e===t},st=function(e){var t={};for(var n in e)t[n]={get:e[n],set:e[n],enumerable:!0,configurable:!0};return t},lt=Le.splice,ct={_splice:lt,_fire:function(e,t,n){N(this.$events[Ee],e,t,n)},size:function(){return this._.length},pushArray:function(e){var t=e.length,n=this.length;return t&&(Le.push.apply(this.$model,e),S.call(this,"add",n,t,Math.max(0,n-1))),t+n},push:function(){var e,t=[],n=arguments.length;for(e=0;n>e;e++)t[e]=arguments[e];return this.pushArray(t)},unshift:function(){var e=arguments.length,t=this.length;return e&&(Le.unshift.apply(this.$model,arguments),S.call(this,"add",0,e,0)),e+t},shift:function(){if(this.length){var e=this.$model.shift();return S.call(this,"del",0,1,0),e}},pop:function(){var e=this.length;if(e){var t=this.$model.pop();return S.call(this,"del",e-1,1,Math.max(0,e-2)),t}},splice:function(e){var t,n=arguments.length,r=[],a=lt.apply(this.$model,arguments);return a.length&&(r.push("del",e,a.length,0),t=!0),n>2&&(t?r.splice(3,1,0,"add",e,n-2):r.push("add",e,n-2,0),t=!0),t?S.apply(this,r):[]},contains:function(e){return-1!==this.indexOf(e)},remove:function(e){return this.removeAt(this.indexOf(e))},removeAt:function(e){return e>=0?(this.$model.splice(e,1),S.call(this,"del",e,1,0)):[]},clear:function(){return this.$model.length=this.length=this._.length=0,this._fire("clear",0),this},removeAll:function(e){if(Array.isArray(e))for(var t=this.length-1;t>=0;t--)-1!==e.indexOf(this[t])&&this.removeAt(t);else if("function"==typeof e)for(t=this.length-1;t>=0;t--){var n=this[t];e(n,t)&&this.removeAt(t)}else this.clear()},ensure:function(e){return this.contains(e)||this.push(e),this},set:function(e,t){if(e<this.length&&e>-1){var n=avalon.type(t);t&&t.$model&&(t=t.$model);var r=this[e];if("object"===n)for(var a in t)r.hasOwnProperty(a)&&(r[a]=t[a]);else"array"===n?r.clear().push.apply(r,t):r!==t&&(this[e]=t,this.$model[e]=t,this._fire("set",e,t))}return this}};"sort,reverse".replace(Se,function(e){ct[e]=function(){var t,n=this.$model,r=n.concat(),a=Math.random(),i=[];Le[e].apply(n,arguments);for(var o=0,s=r.length;s>o;o++){var l=n[o],c=r[o];if(ot(l,c))i.push(o);else{var u=r.indexOf(l);i.push(u),r[u]=a,t=!0}}return t&&(k(this,i),this._fire("move",i),this._fire("index",0)),this}});var ut=function(){var e,t=[];return{begin:function(n){t.push(e),e=n},end:function(){e=t.pop()},collectDependency:function(t,n){e&&e.callback(t,n)}}}(),ft=/^(duplex|on)$/;avalon.injectBinding=function(e){var t=e.evaluator;if(t){ut.begin({callback:function(t,n){A(t.$events[n._name],e)}});try{var n=ft.test(e.type)?e:t.apply(0,e.args);void 0===n&&delete e.evaluator,e.handler&&e.handler(n,e.element,e)}catch(r){o("warning:exception throwed in [avalon.injectBinding] ",r),delete e.evaluator;var a=e.element;if(a&&3===a.nodeType){var i=a.parentNode;h.commentInterpolate?i.replaceChild(xe.createComment(e.value),a):a.data=Ze+(e.oneTime?"::":"")+e.value+Je}}finally{ut.end()}}};var dt=0,ht=avalon.$$subscribers=[],pt=new Date,vt=0,mt=new function(){avalon.mix(this,{option:xe.createElement("select"),thead:xe.createElement("table"),td:xe.createElement("tr"),area:xe.createElement("map"),tr:xe.createElement("tbody"),col:xe.createElement("colgroup"),legend:xe.createElement("fieldset"),_default:xe.createElement("div"),g:xe.createElementNS("http://www.w3.org/2000/svg","svg")}),this.optgroup=this.option,this.tbody=this.tfoot=this.colgroup=this.caption=this.thead,this.th=this.td};String("circle,defs,ellipse,image,line,path,polygon,polyline,rect,symbol,text,use").replace(Se,function(e){mt[e]=mt.g});var gt=/<([\w:]+)/,yt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,bt=c(["","text/javascript","text/ecmascript","application/ecmascript","application/javascript"]),wt=xe.createElement("script"),xt=/<|&#?\w+;/;avalon.parseHTML=function(e){var t=De.cloneNode(!1);if("string"!=typeof e)return t;if(!xt.test(e))return t.appendChild(xe.createTextNode(e)),t;e=e.replace(yt,"<$1></$2>").trim();var n,r=(gt.exec(e)||["",""])[1].toLowerCase(),a=mt[r]||mt._default;a.innerHTML=e;var i=a.getElementsByTagName("script");if(i.length)for(var o,s=0;o=i[s++];)if(bt[o.type]){var l=wt.cloneNode(!1);Le.forEach.call(o.attributes,function(e){l.setAttribute(e.name,e.value)}),l.text=o.text,o.parentNode.replaceChild(l,o)}for(;n=a.firstChild;)t.appendChild(n);return t},avalon.innerHTML=function(e,t){var n=this.parseHTML(t);this.clearHTML(e).appendChild(n)},avalon.clearHTML=function(e){for(e.textContent="";e.firstChild;)e.removeChild(e.firstChild);return e},"add,remove".replace(Se,function(e){avalon.fn[e+"Class"]=function(t){var n=this[0];return t&&"string"==typeof t&&n&&1===n.nodeType&&t.replace(/\S+/g,function(t){n.classList[e](t)}),this}}),avalon.fn.mix({hasClass:function(e){var t=this[0]||{};return 1===t.nodeType&&t.classList.contains(e)},toggleClass:function(e,t){for(var n,r=0,a=String(e).split(/\s+/),i="boolean"==typeof t;n=a[r++];){var o=i?t:!this.hasClass(n);this[o?"addClass":"removeClass"](n)}return this},attr:function(e,t){return 2===arguments.length?(this[0].setAttribute(e,t),this):this[0].getAttribute(e)},data:function(e,t){switch(e="data-"+P(e||""),arguments.length){case 2:return this.attr(e,t),this;case 1:var n=this.attr(e);return D(n);case 0:var r={};return Le.forEach.call(this[0].attributes,function(t){t&&(e=t.name,e.indexOf("data-")||(e=H(e.slice(5)),r[e]=D(t.value)))}),r}},removeData:function(e){return e="data-"+P(e),this[0].removeAttribute(e),this},css:function(e,t){if(avalon.isPlainObject(e))for(var n in e)avalon.css(this,n,e[n]);else var r=avalon.css(this,e,t);return void 0!==r?r:this},position:function(){var e,t,n=this[0],r={top:0,left:0};if(n)return"fixed"===this.css("position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),"HTML"!==e[0].tagName&&(r=e.offset()),r.top+=avalon.css(e[0],"borderTopWidth",!0),r.left+=avalon.css(e[0],"borderLeftWidth",!0),r.top-=e.scrollTop(),r.left-=e.scrollLeft()),{top:t.top-r.top-avalon.css(n,"marginTop",!0),left:t.left-r.left-avalon.css(n,"marginLeft",!0)}},offsetParent:function(){for(var e=this[0].offsetParent;e&&"static"===avalon.css(e,"position");)e=e.offsetParent;return avalon(e||He)},bind:function(e,t,n){return this[0]?avalon.bind(this[0],e,t,n):void 0},unbind:function(e,t,n){return this[0]&&avalon.unbind(this[0],e,t,n),this},val:function(e){var t=this[0];if(t&&1===t.nodeType){var n=0===arguments.length,r=n?":get":":set",a=At[F(t)+r];if(a)var i=a(t,e);else{if(n)return(t.value||"").replace(/\r/g,"");t.value=e}}return n?i:this}}),He.dataset&&(avalon.fn.data=function(e,t){e=e&&H(e);var n=this[0].dataset;switch(arguments.length){case 2:return n[e]=t,this;case 1:return t=n[e],D(t);case 0:var r=s();for(e in n)r[e]=D(n[e]);return r}});var $t=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/;avalon.parseJSON=JSON.parse,avalon.fireDom=function(e,t,n){var r=xe.createEvent("Events");r.initEvent(t,!0,!0),avalon.mix(r,n),e.dispatchEvent(r)},avalon.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){avalon.fn[e]=function(n){var r=this[0]||{},a=I(r),i="scrollTop"===e;return arguments.length?void(a?a.scrollTo(i?a[t]:n,i?n:a[t]):r[e]=n):a?a[t]:r[e]}});var Ct=avalon.cssHooks=s(),Et=["","-webkit-","-moz-","-ms-"],Tt={"float":"cssFloat"};avalon.cssNumber=c("animationIterationCount,columnCount,order,flex,flexGrow,flexShrink,fillOpacity,fontWeight,lineHeight,opacity,orphans,widows,zIndex,zoom"),avalon.cssName=function(e,t,n){if(Tt[e])return Tt[e];t=t||He.style;for(var r=0,a=Et.length;a>r;r++)if(n=H(Et[r]+e),n in t)return Tt[e]=n;return null},Ct["@:set"]=function(e,t,n){e.style[t]=n},Ct["@:get"]=function(e,t){if(!e||!e.style)throw new Error("getComputedStyle要求传入一个节点 "+e);var n,r=getComputedStyle(e);return r&&(n="filter"===t?r.getPropertyValue(t):r[t],""===n&&(n=e.style[t])),n},Ct["opacity:get"]=function(e){var t=Ct["@:get"](e,"opacity");return""===t?"1":t},"top,left".replace(Se,function(e){Ct[e+":get"]=function(t){var n=Ct["@:get"](t,e);return/px$/.test(n)?n:avalon(t).position()[e]+"px"}});var St={position:"absolute",visibility:"hidden",display:"block"},kt=/^(none|table(?!-c[ea]).+)/;"Width,Height".replace(Se,function(e){var t=e.toLowerCase(),n="client"+e,r="scroll"+e,a="offset"+e;Ct[t+":get"]=function(t,n,r){var i=-4;"number"==typeof r&&(i=r),n="Width"===e?["Left","Right"]:["Top","Bottom"];var o=t[a];return 2===i?o+avalon.css(t,"margin"+n[0],!0)+avalon.css(t,"margin"+n[1],!0):(0>i&&(o=o-avalon.css(t,"border"+n[0]+"Width",!0)-avalon.css(t,"border"+n[1]+"Width",!0)),-4===i&&(o=o-avalon.css(t,"padding"+n[0],!0)-avalon.css(t,"padding"+n[1],!0)),o)},Ct[t+"&get"]=function(e){var n=[];R(e,n);for(var r,a=Ct[t+":get"](e),i=0;r=n[i++];){e=r.node;for(var o in r)"string"==typeof r[o]&&(e.style[o]=r[o])}return a},avalon.fn[t]=function(i){var o=this[0];if(0===arguments.length){if(o.setTimeout)return o["inner"+e];if(9===o.nodeType){var s=o.documentElement;return Math.max(o.body[r],s[r],o.body[a],s[a],s[n])}return Ct[t+"&get"](o)}return this.css(t,i)},avalon.fn["inner"+e]=function(){return Ct[t+":get"](this[0],void 0,-2)},avalon.fn["outer"+e]=function(e){return Ct[t+":get"](this[0],void 0,e===!0?2:0)}}),avalon.fn.offset=function(){var e=this[0];try{var t=e.getBoundingClientRect();if(t.width||t.height||e.getClientRects().length){var n=e.ownerDocument,r=n.documentElement,a=n.defaultView;return{top:t.top+a.pageYOffset-r.clientTop,left:t.left+a.pageXOffset-r.clientLeft}}}catch(i){return{left:0,top:0}}};var At={"select:get":function(e,t){for(var n,r=e.options,a=e.selectedIndex,i="select-one"===e.type||0>a,o=i?null:[],s=i?a+1:r.length,l=0>a?s:i?a:0;s>l;l++)if(n=r[l],(n.selected||l===a)&&!n.disabled){if(t=n.value,i)return t;o.push(t)}return o},"select:set":function(e,t,n){t=[].concat(t);for(var r,a=0;r=e.options[a++];)(r.selected=t.indexOf(r.value)>-1)&&(n=!0);n||(e.selectedIndex=-1)}},Nt=JSON.stringify,Mt=["break,case,catch,continue,debugger,default,delete,do,else,false","finally,for,function,if,in,instanceof,new,null,return,switch,this","throw,true,try,typeof,var,void,while,with","abstract,boolean,byte,char,class,const,double,enum,export,extends","final,float,goto,implements,import,int,interface,long,native","package,private,protected,public,short,static,super,synchronized","throws,transient,volatile","arguments,let,yield,undefined"].join(","),Ot=/\/\*[\w\W]*?\*\/|\/\/[^\n]*\n|\/\/[^\n]*$|"(?:[^"\\]|\\[\w\W])*"|'(?:[^'\\]|\\[\w\W])*'|[\s\t\n]*\.[\s\t\n]*[$\w\.]+/g,jt=/[^\w$]+/g,Lt=new RegExp(["\\b"+Mt.replace(/,/g,"\\b|\\b")+"\\b"].join("|"),"g"),_t=/\b\d[^,]*/g,Pt=/^,+|,+$/g,Ht=new Xe(512),Dt=function(e){var t=","+e.trim(),n=Ht.get(t);if(n)return n;var r=e.replace(Ot,"").replace(jt,",").replace(Lt,"").replace(_t,"").replace(Pt,"").split(/^$|,+/);return Ht.put(t,V(r))},It=new Xe(128),Rt=/\w\[.*\]|\w\.\w/,Ft=/(\$proxy\$[a-z]+)\d+$/,Bt=/\)\s*$/,Vt=/\)\s*\|/g,qt=/\|\s*([$\w]+)/g,Ut=/"\s*\["/g,Xt=/"\s*\(/g;avalon.parseExprProxy=z,avalon.scan=function(e,t){e=e||He;var n=t?[].concat(t):[];ee(e,n)};var zt=c("area,base,basefont,br,col,command,embed,hr,img,input,link,meta,param,source,track,wbr,noscript,script,style,textarea".toUpperCase()),Yt=function(e,t,n){var r=e.getAttribute(t);if(r)for(var a,i=0;a=n[i++];)if(a.hasOwnProperty(r)&&"function"==typeof a[r])return a[r]},Wt=Be&&n.MutationObserver?function(e){for(var t,n=e.firstChild;n;){var r=n.nextSibling;3===n.nodeType?t?(t.nodeValue+=n.nodeValue,e.removeChild(n)):t=n:t=null,n=r}}:0,Zt=/^\s*::/,Jt=/ms-(\w+)-?(.*)/,Gt={"if":10,repeat:90,data:100,widget:110,each:1400,"with":1500,duplex:2e3,on:3e3},Kt=c("animationend,blur,change,input,click,dblclick,focus,keydown,keypress,keyup,mousedown,mouseenter,mouseleave,mousemove,mouseout,mouseover,mouseup,scan,scroll,submit"),Qt=c("value,title,alt,checked,selected,disabled,readonly,enabled"),en=/^if|widget|repeat$/,tn=/^each|with|html|include$/,nn=/\|\s*html(?:\b|$)/,rn=/\|\|/g,an=/(['"])(\\\1|.)+?\1/g,on=/\r?\n/g,sn=["autofocus,autoplay,async,allowTransparency,checked,controls","declare,disabled,defer,defaultChecked,defaultSelected","contentEditable,isMap,loop,multiple,noHref,noResize,noShade","open,readOnly,selected"].join(","),ln={};sn.replace(Se,function(e){ln[e.toLowerCase()]=e});var cn={"accept-charset":"acceptCharset","char":"ch",charoff:"chOff","class":"className","for":"htmlFor","http-equiv":"httpEquiv"},un=["accessKey,bgColor,cellPadding,cellSpacing,codeBase,codeType,colSpan","dateTime,defaultValue,frameBorder,longDesc,maxLength,marginWidth,marginHeight","rowSpan,tabIndex,useMap,vSpace,valueType,vAlign"].join(",");un.replace(Se,function(e){cn[e.toLowerCase()]=e});var fn=/<noscript.*?>(?:[\s\S]+?)<\/noscript>/gim,dn=/<noscript.*?>([\s\S]+?)<\/noscript>/im,hn=function(){return new(n.XMLHttpRequest||ActiveXObject)("Microsoft.XMLHTTP")},pn=avalon.templateCache={};qe.attr=function(e,t){var n=X(e.value.trim());if("include"===e.type){var r=e.element;e.includeRendered=Yt(r,"data-include-rendered",t),e.includeLoaded=Yt(r,"data-include-loaded",t);var a=e.includeReplace=!!avalon(r).data("includeReplace");avalon(r).data("includeCache")&&(e.templateCache={}),e.startInclude=xe.createComment("ms-include"),e.endInclude=xe.createComment("ms-include-end"),a?(e.element=e.startInclude,r.parentNode.insertBefore(e.startInclude,r),r.parentNode.insertBefore(e.endInclude,r.nextSibling)):(r.insertBefore(e.startInclude,r.firstChild),r.appendChild(e.endInclude))}e.handlerName="attr",z(n,t,e)},Ue.attr=function(e,t,r){var a=r.type,i=r.param;if("css"===a)avalon(t).css(i,e);else if("attr"===a){var o=e===!1||null===e||void 0===e;!Pe&&cn[i]&&(i=cn[i]);var s=ln[i];if("boolean"==typeof t[s]&&(t[s]=!!e,e||(o=!0)),o)return t.removeAttribute(i);var l=Ae.test(t)?!1:xe.namespaces&&isVML(t)?!0:i in t.cloneNode(!1);l?t[i]=e+"":t.setAttribute(i,e)}else if("include"===a&&e){var c=r.vmodels,u=r.includeRendered,f=r.includeLoaded,d=r.includeReplace,h=d?t.parentNode:t,p=function(t){if(null!==r.vmodels){if(f){var n=f.apply(h,[t].concat(c));"string"==typeof n&&(t=n)}u&&Y(h,function(){u.call(h)},NaN);var a=r.includeLastID;if(r.templateCache&&a&&a!==e){var i=r.templateCache[a];i||(i=r.templateCache[a]=xe.createElement("div"),Ce.appendChild(i))}for(r.includeLastID=e;r.startInclude;){var o=r.startInclude.nextSibling;if(!o||o===r.endInclude)break;h.removeChild(o),i&&i.appendChild(o)}var s=ae(r,e,t),l=avalon.slice(s.childNodes);h.insertBefore(s,r.endInclude),Q(l,c)}};if("src"===r.param)if("string"==typeof pn[e])avalon.nextTick(function(){p(pn[e])});else if(Array.isArray(pn[e]))pn[e].push(p);else{var v=hn();v.onreadystatechange=function(){if(4===v.readyState){var t=v.status;if(t>=200&&300>t||304===t||1223===t){for(var n,r=v.responseText,a=0;n=pn[e][a++];)n(r);pn[e]=r}}},pn[e]=[p],v.open("GET",e,!0),"withCredentials"in v&&(v.withCredentials=!0),v.setRequestHeader("X-Requested-With","XMLHttpRequest"),v.send(null)}else{var m=e&&1===e.nodeType?e:xe.getElementById(e);if(m){if("NOSCRIPT"===m.tagName&&!m.innerHTML&&!m.fixIE78){v=hn(),v.open("GET",location,!1),v.send(null);for(var g=xe.getElementsByTagName("noscript"),y=(v.responseText||"").match(fn)||[],b=y.length,w=0;b>w;w++){var x=g[w];x&&(x.style.display="none",x.fixIE78=(y[w].match(dn)||["","&nbsp;"])[1])}}avalon.nextTick(function(){p(m.fixIE78||m.value||m.innerText||m.innerHTML)})}}}else if(He.hasAttribute||"string"!=typeof e||"src"!==a&&"href"!==a||(e=e.replace(/&amp;/g,"&")),t[a]=e,n.chrome&&"EMBED"===t.tagName){var $=t.parentNode,C=document.createComment("ms-src");$.replaceChild(C,t),$.replaceChild(t,C)}},"title,alt,src,value,css,include,href".replace(Se,function(e){qe[e]=qe.attr}),qe["class"]=function(e,t){var n,r=e.param,a=e.value;if(e.handlerName="class",!r||isFinite(r)){e.param="";var i=a.replace(Ke,function(e){return e.replace(/./g,"0")}).indexOf(":");if(-1===i){var o=a;n=!0}else o=a.slice(0,i),n=a.slice(i+1);o=Ge.test(a)?X(o):Nt(o),e.expr="["+o+","+n+"]"}else e.expr="["+Nt(r)+","+a+"]",e.oldStyle=r;var s=e.type;if("hover"===s||"active"===s){if(!e.hasBindEvent){var l=e.element,c=avalon(l),u="mouseenter",f="mouseleave";if("active"===s){l.tabIndex=l.tabIndex||-1,u="mousedown",f="mouseup";var d=c.bind("mouseleave",function(){e.toggleClass&&c.removeClass(e.newClass)})}}var h=c.bind(u,function(){e.toggleClass&&c.addClass(e.newClass)}),p=c.bind(f,function(){e.toggleClass&&c.removeClass(e.newClass)});e.rollback=function(){c.unbind("mouseleave",d),c.unbind(u,h),c.unbind(f,p)},e.hasBindEvent=!0}z(e.expr,t,e)},Ue["class"]=function(e,t,n){var r=avalon(t);n.newClass=e[0],n.toggleClass=!!e[1],n.oldClass&&n.newClass!==n.oldClass&&r.removeClass(n.oldClass),n.oldClass=n.newClass,"class"===n.type&&(n.oldStyle?r.toggleClass(n.oldStyle,!!e[1]):r.toggleClass(n.newClass,n.toggleClass))},"hover,active".replace(Se,function(e){qe[e]=qe["class"]}),Ue.data=function(e,t,n){var r="data-"+n.param;e&&"object"==typeof e?t[r]=e:t.setAttribute(r,String(e))};var vn=qe.duplex=function(e,t){var n,r=e.element;if(z(e.value,t,e,1),e.changed=Yt(r,"data-duplex-changed",t)||l,e.evaluator&&e.args){var a=[],i=c("string,number,boolean,checked");"radio"===r.type&&""===e.param&&(e.param="checked"),r.msData&&(r.msData["ms-duplex"]=e.value),e.param.replace(/\w+/g,function(t){/^(checkbox|radio)$/.test(r.type)&&/^(radio|checked)$/.test(t)&&("radio"===t&&o("ms-duplex-radio已经更名为ms-duplex-checked"),t="checked",e.isChecked=!0),"bool"===t?(t="boolean",o("ms-duplex-bool已经更名为ms-duplex-boolean")):"text"===t&&(t="string",o("ms-duplex-text已经更名为ms-duplex-string")),i[t]&&(n=!0),avalon.Array.ensure(a,t)}),n||a.push("string"),e.param=a.join("-"),e.bound=function(t,n){r.addEventListener?r.addEventListener(t,n,!1):r.attachEvent("on"+t,n);var a=e.rollback;e.rollback=function(){r.avalonSetter=null,avalon.unbind(r,t,n),a&&a()}};for(var s in avalon.vmodels){var u=avalon.vmodels[s];u.$fire("avalon-ms-duplex-init",e)}var f=e.pipe||(e.pipe=oe);f(null,e,"init");var d=r.tagName;vn[d]&&vn[d](r,e.evaluator.apply(null,e.args),e)}};avalon.duplexHooks={checked:{get:function(e,t){return!t.element.oldValue}},string:{get:function(e){return e},set:ie},"boolean":{get:function(e){return"true"===e},set:ie},number:{get:function(e,t){var n=parseFloat(e);if(-e===-n)return n;var r=/strong|medium|weak/.exec(t.element.getAttribute("data-duplex-number"))||["medium"];switch(r[0]){case"strong":return 0;case"medium":return""===e?"":0;case"weak":return e}},set:ie}};var mn,gn=[];avalon.tick=function(e){1===gn.push(e)&&(mn=setInterval(se,60))};var yn=l;!new function(){function e(e){t[this.tagName].call(this,e),!this.msFocus&&this.avalonSetter&&this.avalonSetter()}try{var t={},n=HTMLInputElement.prototype,r=HTMLTextAreaElement.prototype,a=HTMLInputElement.prototype;Object.getOwnPropertyNames(a),t.INPUT=Object.getOwnPropertyDescriptor(n,"value").set,Object.defineProperty(n,"value",{set:e}),t.TEXTAREA=Object.getOwnPropertyDescriptor(r,"value").set,Object.defineProperty(r,"value",{set:e})}catch(i){yn=avalon.tick}};var bn=/^(file|button|reset|submit|checkbox|radio|range)$/;vn.INPUT=function(e,t,n){function r(e){n.changed.call(this,e,n)}function a(){f=!0}function i(){f=!1}var s,l=e.type,c=n.bound,u=avalon(e),f=!1,d=function(){var a=e.value;if(!f&&a!==s){var i=n.pipe(a,n,"get");u.data("duplexObserve")!==!1&&(s=a,t(i),r.call(e,i))}};if(n.handler=function(){var r=n.pipe(t(),n,"set");if(r!==s){var a=!1;if(e.msFocus)try{var i=e.selectionStart,o=e.selectionEnd;if(i===o){var l=i;a=!0}}catch(c){}e.value=s=r,a&&!e.readyOnly&&(e.selectionStart=e.selectionEnd=l)}},n.isChecked||"radio"===l)d=function(){if(u.data("duplexObserve")!==!1){var a=n.pipe(e.value,n,"get");t(a),r.call(e,a)}},n.handler=function(){var r=t(),a=n.isChecked?!!r:r+""===e.value;e.checked=e.oldValue=a},c("click",d);else if("checkbox"===l)d=function(){if(u.data("duplexObserve")!==!1){var a=e.checked?"ensure":"remove",i=t();Array.isArray(i)||(o("ms-duplex应用于checkbox上要对应一个数组"),i=[i]),avalon.Array[a](i,n.pipe(e.value,n,"get")),r.call(e,i)}},n.handler=function(){var r=[].concat(t());e.checked=r.indexOf(n.pipe(e.value,n,"get"))>-1},c("change",d);else{var h=e.getAttribute("data-duplex-event")||"input";e.attributes["data-event"]&&o("data-event指令已经废弃，请改用data-duplex-event"),h.replace(Se,function(e){switch(e){case"input":c("input",d),c("keyup",d),Be||(c("compositionstart",a),c("compositionend",i),c("DOMAutoComplete",d));break;default:c(e,d)}}),bn.test(l)||("hidden"!==l&&(c("focus",function(){e.msFocus=!0}),c("blur",function(){e.msFocus=!1})),e.avalonSetter=d,yn(function(){if(He.contains(e))e.msFocus||d();else if(!e.msRetain)return!1}))}avalon.injectBinding(n),r.call(e,e.value)},vn.TEXTAREA=vn.INPUT,vn.SELECT=function(e,t,n){function r(){if(a.data("duplexObserve")!==!1){var r=a.val();r=Array.isArray(r)?r.map(function(e){return n.pipe(e,n,"get")}):n.pipe(r,n,"get"),r+""!==e.oldValue&&t(r),n.changed.call(e,r,n)}}var a=avalon(e);n.handler=function(){var n=t();n=n&&n.$model||n,Array.isArray(n)?e.multiple||o("ms-duplex在<select multiple=true>上要求对应一个数组"):e.multiple&&o("ms-duplex在<select multiple=false>不能对应一个数组"),n=Array.isArray(n)?n.map(String):n+"",n+""!==e.oldValue&&(a.val(n),e.oldValue=n+"")},n.bound("change",r),e.msCallback=function(){avalon.injectBinding(n),n.changed.call(e,t(),n)}},Ue.html=function(e,t,n){var r=1!==t.nodeType,a=r?t.parentNode:t;if(a&&(e=null==e?"":e,n.oldText!==e)){if(n.oldText=e,3===t.nodeType){var i=Fe("html");a.insertBefore(xe.createComment(i),t),n.element=xe.createComment(i+":end"),a.replaceChild(n.element,t),t=n.element}if("object"!=typeof e)var o=avalon.parseHTML(String(e));else if(11===e.nodeType)o=e;else if(1===e.nodeType||e.item){var s=1===e.nodeType?e.childNodes:e.item;for(o=De.cloneNode(!0);s[0];)o.appendChild(s[0])}if(s=avalon.slice(o.childNodes),r){for(var l=t.nodeValue.slice(0,-4);;){var c=t.previousSibling;if(!c||8===c.nodeType&&c.nodeValue===l)break;a.removeChild(c)}a.insertBefore(o,t)}else avalon.clearHTML(t).appendChild(o);Q(s,n.vmodels)}},qe["if"]=qe.data=qe.text=qe.html=function(e,t){z(e.value,t,e)},Ue["if"]=function(e,t,n){try{if(!t.parentNode)return}catch(r){return}if(e)8===t.nodeType&&(t.parentNode.replaceChild(n.template,t),t.ifRemove=null,t=n.element=n.template),t.getAttribute(n.name)&&(t.removeAttribute(n.name),G(t,n.vmodels)),n.rollback=null;else if(1===t.nodeType){var a=n.element=xe.createComment("ms-if");t.parentNode.replaceChild(a,t),t.ifRemove=a,n.template=t,Ce.appendChild(t),n.rollback=function(){t.parentNode===Ce&&Ce.removeChild(t)}}};var wn=/\(([^)]*)\)/;qe.on=function(e,t){var n=e.value;e.type="on";var r=e.param.replace(/-\d+$/,"");if("function"==typeof qe.on[r+"Hook"]&&qe.on[r+"Hook"](e),n.indexOf("(")>0&&n.indexOf(")")>-1){var a=(n.match(wn)||["",""])[1].trim();""!==a&&"$event"!==a||(n=n.replace(wn,""))}z(n,t,e)},Ue.on=function(e,t,n){e=function(e){var t=n.evaluator||l;return t.apply(this,n.args.concat(e))};var r=n.param.replace(/-\d+$/,"");if("scan"===r)e.call(t,{type:r});else if("function"==typeof n.specialBind)n.specialBind(t,e);else var a=avalon.bind(t,r,e);n.rollback=function(){"function"==typeof n.specialUnbind?n.specialUnbind():avalon.unbind(t,r,a)}},qe.repeat=function(e,t){var n=e.type;z(e.value,t,e,1),e.proxies=[];var r=!1;try{var a=e.$repeat=e.evaluator.apply(0,e.args||[]),i=avalon.type(a);"object"!==i&&"array"!==i?(r=!0,avalon.log("warning:"+e.value+"只能是对象或数组")):e.xtype=i}catch(o){r=!0}var s=e.value.split(".")||[];if(s.length>1){s.pop();for(var c,u=s[0],f=0;c=t[f++];)if(c&&c.hasOwnProperty(u)){var d=c[u].$events||{};d[Ee]=d[Ee]||[],A(d[Ee],e);break}}var h=e.handler;e.handler=l,avalon.injectBinding(e),e.handler=h;var p=e.element;if(1===p.nodeType){p.removeAttribute(e.name),e.sortedCallback=Yt(p,"data-with-sorted",t),e.renderedCallback=Yt(p,"data-"+n+"-rendered",t);var v=Fe(n),m=xe.createComment(v),g=xe.createComment(v+":end");if(e.signature=v,e.template=De.cloneNode(!1),"repeat"===n){var y=p.parentNode;y.replaceChild(g,p),y.insertBefore(m,g),e.template.appendChild(p)}else{for(;p.firstChild;)e.template.appendChild(p.firstChild);p.appendChild(m),p.appendChild(g)}e.element=g,e.handler=Ue.repeat,e.rollback=function(){var t=e.element;t&&e.handler("clear")}}if(!r){e.$outer={};var b="$key",w="$val";for(Array.isArray(a)&&(b="$first",w="$last"),f=0;c=t[f++];)if(c.hasOwnProperty(b)&&c.hasOwnProperty(w)){e.$outer=c;break}var x=a.$events,$=(x||{})[Ee];A($,e),"object"===i?e.handler("append"):a.length&&e.handler("add",0,a.length)}},Ue.repeat=function(e,t,n){var r=this;if(!e&&r.xtype){var a=r.$repeat,i=r.evaluator.apply(0,r.args||[]);if("array"===r.xtype){if(a.length===i.length){if(!(a!==i&&a.length>0))return;Ue.repeat.call(this,"clear",t,n)}e="add",t=0,r.$repeat=i,n=i.length}else{if(g(a).join(";;")===g(i).join(";;"))return;e="append",r.$repeat=i}}if(e){var o,s,c=r.element,u=ce(r),f=c.parentNode,d=r.proxies,h=De.cloneNode(!1);switch(e){case"add":for(var p=t+n,v=[],m=t;p>m;m++){var y=me(m,r);d.splice(m,0,y),le(r,h,y,v)}for(f.insertBefore(h,u[t]||c),m=0;s=v[m++];)Q(s.nodes,s.vmodels),s.nodes=s.vmodels=null;break;case"del":ue(u[t],u[t+n]||c);var b=d.splice(t,n);he(b,"each");break;case"clear":o=u[0],o&&(ue(o,c),"object"===r.xtype?f.insertBefore(o,c):he(d,"each"));break;case"move":if(o=u[0]){var w,x=o.nodeValue,$=[],C=[];for(ue(o,c,function(){C.unshift(this),this.nodeValue===x&&($.unshift(C),C=[])}),k($,t),k(d,t);C=$.shift();)for(;w=C.shift();)h.appendChild(w);f.insertBefore(h,c)}break;case"index":for(var E=d.length-1;n=d[t];t++)n.$index=t,n.$first=0===t,n.$last=t===E;return;case"set":y=d[t],y&&N(y.$events[r.param||"el"]);break;case"append":var T=r.$repeat,S=Array.isArray(d)||!d?{}:d;r.proxies=S;var A=[];v=[];for(var M in S)T.hasOwnProperty(M)||(ge(S[M],xn),delete S[M]);for(M in T)T.hasOwnProperty(M)&&"hasOwnProperty"!==M&&A.push(M);if(r.sortedCallback){var O=r.sortedCallback.call(f,A);O&&Array.isArray(O)&&O.length&&(A=O)}for(m=0;M=A[m++];)"hasOwnProperty"!==M&&(S[M]=de(S[M],M,r),le(r,h,S[M],v));for(f.insertBefore(h,c),m=0;s=v[m++];)Q(s.nodes,s.vmodels),s.nodes=s.vmodels=null}if(!r.$repeat||r.$repeat.hasOwnProperty("$lock"))return;"clear"===e&&(e="del");var j=r.renderedCallback||l,L=arguments;f.oldValue&&"SELECT"===f.tagName&&avalon(f).val(f.oldValue.split(",")),j.apply(f,L)}},"with,each".replace(Se,function(e){qe[e]=qe.repeat});var xn=[],$n=[];Ue.text=function(e,t){if(e=null==e?"":e,3===t.nodeType)try{t.data=e}catch(n){}else t.textContent=e},avalon.parseDisplay=ye,qe.visible=function(e,t){z(e.value,t,e)},Ue.visible=function(e,t,n){e?(t.style.display=n.display||"","none"===avalon(t).css("display")&&(t.style.display=n.display=ye(t.nodeName))):t.style.display="none"},qe.widget=function(e,t){var r=e.value.match(Se),a=e.element,i=r[0],s=r[1];s&&"$"!==s||(s=Fe(i));var c=r[2]||i,u=avalon.ui[i];if("function"==typeof u){t=a.vmodels||t;for(var f,d=0;f=t[d++];)if(f.hasOwnProperty(c)&&"object"==typeof f[c]){var h=f[c];h=h.$model||h;break}if(h){var p=h[i+"Id"];"string"==typeof p&&(o("warning!不再支持"+i+"Id"),s=p)}var v=avalon.getWidgetData(a,i);e.value=[i,s,c].join(","),e[i+"Id"]=s,e.evaluator=l,a.msData["ms-widget-id"]=s;var m=e[i+"Options"]=avalon.mix({},u.defaults,h||{},v);a.removeAttribute("ms-widget");var g=u(a,e,t)||{};if(g.$id){avalon.vmodels[s]=g,W(a,g);try{g.$init(function(){avalon.scan(a,[g].concat(t)),"function"==typeof m.onInit&&m.onInit.call(a,g,m,t)})}catch(y){o(y)}e.rollback=function(){try{g.$remove(),g.widgetElement=null}catch(e){}a.msData={},delete avalon.vmodels[g.$id]},O(e,Cn),n.chrome&&a.addEventListener("DOMNodeRemovedFromDocument",function(){setTimeout(j)})}else avalon.scan(a,t)}else t.length&&(a.vmodels=t)};var Cn=[],En=/<script[^>]*>([\S\s]*?)<\/script\s*>/gim,Tn=/\s+(on[^=\s]+)(?:=("[^"]*"|'[^']*'|[^\s>]+))?/g,Sn=/<\w+\b(?:(["'])[^"]*?(\1)|[^>])*>/gi,kn={a:/\b(href)\=("javascript[^"]*"|'javascript[^']*')/gi,img:/\b(src)\=("javascript[^"]*"|'javascript[^']*')/gi,form:/\b(action)\=("javascript[^"]*"|'javascript[^']*')/gi},An=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Nn=/([^\#-~| |!])/g,Mn=avalon.filters={uppercase:function(e){return e.toUpperCase()},lowercase:function(e){return e.toLowerCase()},truncate:function(e,t,n){return t=t||30,n="string"==typeof n?n:"...",e.length>t?e.slice(0,t-n.length)+n:String(e)},$filter:function(e){for(var t=1,n=arguments.length;n>t;t++){var r=arguments[t],a=avalon.filters[r[0]];if("function"==typeof a){var i=[e].concat(r.slice(1));e=a.apply(null,i)}}return e},camelize:H,sanitize:function(e){return e.replace(En,"").replace(Sn,function(e,t){var n=e.toLowerCase().match(/<(\w+)\s/);if(n){var r=kn[n[1]];r&&(e=e.replace(r,function(e,t,n){var r=n.charAt(0);return t+"="+r+"javascript:void(0)"+r}))}return e.replace(Tn," ").replace(/\s+/g," ")})},escape:function(e){return String(e).replace(/&/g,"&amp;").replace(An,function(e){var t=e.charCodeAt(0),n=e.charCodeAt(1);return"&#"+(1024*(t-55296)+(n-56320)+65536)+";"}).replace(Nn,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")},currency:function(e,t,n){return(t||"￥")+be(e,isFinite(n)?n:2)},number:be};!new function(){function e(e){return parseInt(e,10)||0}function t(e,t,n){var r="";for(0>e&&(r="-",e=-e),e=""+e;e.length<t;)e="0"+e;return n&&(e=e.substr(e.length-t)),r+e}function n(e,n,r,a){return function(i){var o=i["get"+e]();return(r>0||o>-r)&&(o+=r),0===o&&-12===r&&(o=12),t(o,n,a)}}function r(e,t){return function(n,r){var a=n["get"+e](),i=(t?"SHORT"+e:e).toUpperCase();return r[i][a]}}function a(e){var n=-1*e.getTimezoneOffset(),r=n>=0?"+":"";return r+=t(Math[n>0?"floor":"ceil"](n/60),2)+t(Math.abs(n%60),2)}function i(e,t){return e.getHours()<12?t.AMPMS[0]:t.AMPMS[1]}var o={yyyy:n("FullYear",4),yy:n("FullYear",2,0,!0),y:n("FullYear",1),MMMM:r("Month"),MMM:r("Month",!0),MM:n("Month",2,1),M:n("Month",1,1),dd:n("Date",2),d:n("Date",1),HH:n("Hours",2),H:n("Hours",1),hh:n("Hours",2,-12),h:n("Hours",1,-12),mm:n("Minutes",2),m:n("Minutes",1),ss:n("Seconds",2),s:n("Seconds",1),sss:n("Milliseconds",3),EEEE:r("Day"),EEE:r("Day",!0),a:i,Z:a},s=/((?:[^yMdHhmsaZE']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z))(.*)/,l=/^\/Date\((\d+)\)\/$/;Mn.date=function(t,n){var r,a,i=Mn.date.locate,c="",u=[];if(n=n||"mediumDate",n=i[n]||n,"string"==typeof t)if(/^\d+$/.test(t))t=e(t);else if(l.test(t))t=+RegExp.$1;else{var f=t.trim(),d=[0,0,0,0,0,0,0],h=new Date(0);f=f.replace(/^(\d+)\D(\d+)\D(\d+)/,function(t,n,r,a){var i=4===a.length?[a,n,r]:[n,r,a];return d[0]=e(i[0]),d[1]=e(i[1])-1,d[2]=e(i[2]),""});var p=h.setFullYear,v=h.setHours;f=f.replace(/[T\s](\d+):(\d+):?(\d+)?\.?(\d)?/,function(t,n,r,a,i){return d[3]=e(n),
d[4]=e(r),d[5]=e(a),i&&(d[6]=Math.round(1e3*parseFloat("0."+i))),""});var m=0,g=0;f=f.replace(/Z|([+-])(\d\d):?(\d\d)/,function(t,n,r,a){return p=h.setUTCFullYear,v=h.setUTCHours,n&&(m=e(n+r),g=e(n+a)),""}),d[3]-=m,d[4]-=g,p.apply(h,d.slice(0,3)),v.apply(h,d.slice(3)),t=h}if("number"==typeof t&&(t=new Date(t)),"date"===avalon.type(t)){for(;n;)a=s.exec(n),a?(u=u.concat(a.slice(1)),n=u.pop()):(u.push(n),n=null);return u.forEach(function(e){r=o[e],c+=r?r(t,i):e.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),c}};var c={AMPMS:{0:"上午",1:"下午"},DAY:{0:"星期日",1:"星期一",2:"星期二",3:"星期三",4:"星期四",5:"星期五",6:"星期六"},MONTH:{0:"1月",1:"2月",2:"3月",3:"4月",4:"5月",5:"6月",6:"7月",7:"8月",8:"9月",9:"10月",10:"11月",11:"12月"},SHORTDAY:{0:"周日",1:"周一",2:"周二",3:"周三",4:"周四",5:"周五",6:"周六"},fullDate:"y年M月d日EEEE",longDate:"y年M月d日",medium:"yyyy-M-d H:mm:ss",mediumDate:"yyyy-M-d",mediumTime:"H:mm:ss","short":"yy-M-d ah:mm",shortDate:"yy-M-d",shortTime:"ah:mm"};c.SHORTMONTH=c.MONTH,Mn.date.locate=c},new function(){function e(e){for(r=1;e=n.shift();)e()}avalon.config({loader:!1});var t,n=[],r="complete"===xe.readyState;avalon.bind(xe,"DOMContentLoaded",t=function(){avalon.unbind(xe,"DOMContentLoaded",t),e()});var a=setInterval(function(){"complete"===document.readyState&&document.body&&(clearInterval(a),e())},50);avalon.ready=function(e){r?e(avalon):n.push(e)},avalon.ready(function(){avalon.scan(xe.body)})},new function(){function e(){return/iPad|iPhone|iPod/i.test(r)&&!n.MSStream?"backdropFilter"in document.documentElement.style?9:n.indexedDB?8:n.SpeechSynthesisUtterance?7:n.webkitAudioContext?6:n.matchMedia?5:n.history&&"pushState"in n.history?4:3:NaN}function t(e,t){return t&&s.forEach(function(n){e[n]=t[n]}),e}var r=navigator.userAgent.toLowerCase(),a=r.indexOf("android")>0,i=e(),o=avalon.gestureHooks={pointers:{},start:function(e,n){for(var r=0;r<e.changedTouches.length;r++){var a=e.changedTouches[r],i={startTouch:t({},a),startTime:Date.now(),status:"tapping",element:e.target};o.pointers[a.identifier]=i,n(i,a)}},move:function(e,n){for(var r=0;r<e.changedTouches.length;r++){var a=e.changedTouches[r],i=o.pointers[a.identifier];if(!i)return;"lastTouch"in i||(i.lastTouch=i.startTouch,i.lastTime=i.startTime,i.deltaX=i.deltaY=i.duration=i.distance=0);var s=Date.now()-i.lastTime;if(s>0){var l=70;s>l&&(s=l),i.duration+s>l&&(i.duration=l-s),i.duration+=s,i.lastTouch=t({},a),i.lastTime=Date.now(),i.deltaX=a.clientX-i.startTouch.clientX,i.deltaY=a.clientY-i.startTouch.clientY;var c=i.deltaX*i.deltaX,u=i.deltaY*i.deltaY;i.distance=Math.sqrt(c+u),i.isVertical=u>c,n(i,a)}}},end:function(e,t){for(var n=0;n<e.changedTouches.length;n++){var r=e.changedTouches[n],a=r.identifier,i=o.pointers[a];i&&(t(i,r),delete o.pointers[a])}},fire:function(e,t,n){if(e){var r=document.createEvent("Events");r.initEvent(t,!0,!0),avalon.mix(r,n),e.dispatchEvent(r)}},add:function(e,t){function n(e){t.touchmove(e)}function r(e){t.touchend(e),document.removeEventListener("touchmove",n),document.removeEventListener("touchend",r),document.removeEventListener("touchcancel",a)}function a(e){t.touchcancel(e),document.removeEventListener("touchmove",n),document.removeEventListener("touchend",r),document.removeEventListener("touchcancel",a)}t.events.forEach(function(i){avalon.eventHooks[i]={fn:function(i,o){return i["touch-"+e]||(i["touch-"+e]="1",i.addEventListener("touchstart",function(e){t.touchstart(e),document.addEventListener("touchmove",n),document.addEventListener("touchend",r),document.addEventListener("touchcancel",a)})),o}}})}},s=["screenX","screenY","clientX","clientY","pageX","pageY"],c=!!navigator.pointerEnabled||!!navigator.msPointerEnabled;c&&(He.style.msTouchAction=He.style.touchAction="none");var u={events:["tap"],touchBoundary:10,tapDelay:200,needClick:function(e){switch(e.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(e.disabled)return!0;break;case"input":if(i&&"file"===e.type||e.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return!1},needFocus:function(e){switch(e.nodeName.toLowerCase()){case"textarea":case"select":return!0;case"input":switch(e.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!e.disabled&&!e.readOnly;default:return!1}},focus:function(e){var t,n=e.type;i&&e.setSelectionRange&&0!==n.indexOf("date")&&"time"!==n&&"month"!==n?(t=e.value.length,e.setSelectionRange(t,t)):e.focus()},findControl:function(e){return void 0!==e.control?e.control:e.htmlFor?document.getElementById(e.htmlFor):e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},fixTarget:function(e){return 3===e.nodeType?e.parentNode:n.SVGElementInstance&&e instanceof SVGElementInstance?e.correspondingUseElement:e},updateScrollParent:function(e){var t=e.tapScrollParent;if(!t||!t.contains(e)){var n=e;do{if(n.scrollHeight>n.offsetHeight){t=n,e.tapScrollParent=n;break}n=n.parentElement}while(n)}t&&(t.lastScrollTop=t.scrollTop)},touchHasMoved:function(e){var t=e.changedTouches[0],n=u.touchBoundary;return Math.abs(t.pageX-u.pageX)>n||Math.abs(t.pageY-u.pageY)>n},findType:function(e){return a&&"select"===e.tagName.toLowerCase()?"mousedown":"click"},sendClick:function(e,t){o.fire(e,"tap",{touchEvent:t});var r,a;document.activeElement&&document.activeElement!==e&&document.activeElement.blur(),a=t.changedTouches[0],r=document.createEvent("MouseEvents"),r.initMouseEvent(u.findType(e),!0,!0,n,1,a.screenX,a.screenY,a.clientX,a.clientY,!1,!1,!1,!1,0,null),r.touchEvent=t,e.dispatchEvent(r)},touchstart:function(e){if(1!==e.targetTouches.length)return!0;var t=u.fixTarget(e.target),r=e.targetTouches[0];if(i){var a=n.getSelection();if(a.rangeCount&&!a.isCollapsed)return!0;var o=r.identifier;if(o&&isFinite(u.lastTouchIdentifier)&&u.lastTouchIdentifier===o)return e.preventDefault(),!1;u.lastTouchIdentifier=o,u.updateScrollParent(t)}u.status="tapping",u.startTime=Date.now(),u.element=t,u.pageX=r.pageX,u.pageY=r.pageY,u.startTime-u.lastTime<u.tapDelay&&e.preventDefault()},touchmove:function(e){return"tapping"!==u.status?!0:void((u.element!==u.fixTarget(e.target)||u.touchHasMoved(e))&&(u.status=u.element=0))},touchend:function(e){var t=u.element,r=Date.now();if(!t||r-u.startTime>u.tapDelay)return!0;u.lastTime=r;var s=u.startTime;u.status=u.startTime=0;var l=t.tagName.toLowerCase();if("label"===l){o.fire(t,"tap",{touchEvent:e});var c=u.findControl(t);c&&(u.focus(t),t=c)}else if(u.needFocus(t))return r-s>100||i&&n.top!==n&&"input"===l?(u.element=0,!1):(u.focus(t),a&&u.sendClick(t,e),!1);if(i){var f=t.tapScrollParent;if(f&&f.lastScrollTop!==f.scrollTop)return!0}u.needClick(t)||(e.preventDefault(),u.sendClick(t,e))},touchcancel:function(){u.startTime=u.element=0}};o.add("tap",u);var f={events:["longtap","doubletap"],cancelPress:function(e){clearTimeout(e.pressingHandler),e.pressingHandler=null},touchstart:function(e){o.start(e,function(t,n){t.pressingHandler=setTimeout(function(){"tapping"===t.status&&o.fire(e.target,"longtap",{touch:n,touchEvent:e}),f.cancelPress(t)},500),1!==e.changedTouches.length&&(t.status=0)})},touchmove:function(e){o.move(e,function(e){e.distance>10&&e.pressingHandler&&(f.cancelPress(e),"tapping"===e.status&&(e.status="panning"))})},touchend:function(e){o.end(e,function(t,n){f.cancelPress(t),"tapping"===t.status&&(t.lastTime=Date.now(),f.lastTap&&t.lastTime-f.lastTap.lastTime<300&&o.fire(t.element,"doubletap",{touch:n,touchEvent:e}),f.lastTap=t)})},touchcancel:function(e){o.end(e,function(e){f.cancelPress(e)})}};o.add("press",f);var d={events:["swipe","swipeleft","swiperight","swipeup","swipedown"],getAngle:function(e,t){return 180*Math.atan2(t,e)/Math.PI},getDirection:function(e,t){var n=d.getAngle(e,t);return-45>n&&n>-135?"up":n>=45&&315>n?"down":n>-45&&45>=n?"right":"left"},touchstart:function(e){o.start(e,l)},touchmove:function(e){o.move(e,l)},touchend:function(e){1===e.changedTouches.length&&o.end(e,function(t,n){var r=t.distance>30&&t.distance/t.duration>.65;if(r){var a={deltaX:t.deltaX,deltaY:t.deltaY,touch:n,touchEvent:e,direction:d.getDirection(t.deltaX,t.deltaY),isVertical:t.isVertical},i=t.element;o.fire(i,"swipe",a),o.fire(i,"swipe"+a.direction,a)}})}};d.touchcancel=d.touchend,o.add("swipe",d)},r=[],a=function(){return avalon}.apply(t,r),!(void 0!==a&&(e.exports=a));var On=n.avalon;return avalon.noConflict=function(e){return e&&n.avalon===avalon&&(n.avalon=On),avalon},void 0===i&&(n.avalon=avalon),avalon})},,function(e,t,n){var r;r=function(){"use strict";function e(e){var t;for(t=0;t<e.length;t+=1)e[t](c)}function t(){var t=u;l&&t.length&&(u=[],e(t))}function n(){l||(l=!0,o&&clearInterval(o),t())}function r(e){return l?e(c):u.push(e),r}var a,i,o,s="undefined"!=typeof window&&window.document,l=!s,c=s?document:null,u=[];if(s){if(document.addEventListener)document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1);else if(window.attachEvent){window.attachEvent("onload",n),i=document.createElement("div");try{a=null===window.frameElement}catch(f){}i.doScroll&&a&&window.external&&(o=setInterval(function(){try{i.doScroll(),n()}catch(e){}},30))}"complete"===document.readyState&&n()}return r.version="2.0.1",r.load=function(e,t,n,a){a.isBuild?n(null):r(n)},r}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))},,,,,function(e,t,n){var r,a;r=[n(11),n(1)],a=function(){function e(){for(var e=T.oldNodes;e.length;){var t=e.length-1,n=e[t];n.parentNode&&n.parentNode.removeChild(n),e.splice(t,1)}}function t(e,t,n){n in t&&(e[n]=t[n],delete t[n])}function n(){return document.getElementsByTagName("avalon")[0]}function r(e){var t,n=document.createDocumentFragment(),r=document.getElementById(e),a=r.eles,i=0;if(r)for(;t=a[i];)n.appendChild(t),i++;return n}function a(e,t){var n,r=document.createDocumentFragment(),a=document.getElementById(e);if(a||(a=document.createElement("div"),a.id=e,k.appendChild(a)),a.eles)avalon.each(a.eles,function(e,t){r.appendChild(t)});else{for(a.eles=[];n=t.firstChild;)r.appendChild(n),a.eles.push(n);S[e]=!0}a.appendChild(r)}function i(e,t,n,r){var i=T.lastLocal;if(i&&(t[0]||e[0])){var o=T._local,s=[];for(var l in i){var c=i[l];if(!(l in o)||o[l]!=c){if(c.$ctrl&&"$onBeforeUnload"in c.$ctrl&&c.$ctrl.$onBeforeUnload(n,r)===!1)return!1;c.element&&e[0]!=t[0]&&s.push(c)}}avalon.each(s,function(e,t){var n=t.element,r=avalon(n).data("currentCache");r&&a(r,n)}),s=null}}function o(e,t,n,r){if(n.hasClass("oni-mmRouter-slide")){var a=t.cloneNode(!0);a.setAttribute("ms-skip","true"),avalon(a).removeClass("oni-mmRouter-enter").addClass("oni-mmRouter-leave"),avalon(t).addClass("oni-mmRouter-enter"),t.parentNode.insertBefore(a,t),T.oldNodes.push(a),f("onViewEnter",r,t,a)}return t}function s(e,t){return avalon.mix(new(avalon.mix(function(){},{prototype:e})),t)}function l(e){return e instanceof Error}function c(e){if(l(e))throw e;f("onError",T,e,e&&e.state)}function u(e){var t=avalon.isFunction(e)?new Promise(e):Promise.all(e);return t}function f(e,t){return E.$fire.apply(E,arguments),avalon.state[e]?avalon.state[e].apply(t||T.currentState,[].slice.call(arguments,2)):0}function d(e,t){if(!(this instanceof d)){var n=C[e]=new d(e,t||{});return n}this.stateName=e,this.formate(t)}function h(){return this instanceof h?void(this.$vmodels=[]):new h}function p(e,t){for(var n in e)if(!(n in t)||e[n]!==t[n])return!1;for(var n in t)if(!(n in e)||e[n]!==t[n])return!1;return!0}function v(e){return C[e]}function m(e,t){var n,t=t||"ms-view";return n=e.querySelectorAll?e.querySelectorAll("["+t+"]"):Array.prototype.filter.call(e.getElementsByTagName("*"),function(e){return"string"==typeof e.getAttribute(t)})}function g(e,t,n){var r=u(function(r,a){var i="function"==typeof e?e(t):e;"string"==typeof i?r(i):(n.message="template必须对应一个字符串或一个返回字符串的函数",a(n))});return r}function y(e,t,n){var r=u(function(r,a){return"function"==typeof e&&(e=e(t)),"string"!=typeof e?(n.message="templateUrl必须对应一个URL",a(n)):avalon.templateCache[e]?r(avalon.templateCache[e]):void avalon.state.templateLoader(e,r,a,n)});return r}function b(e,t,n){var r=u(function(r,a){if("function"==typeof e){var i=e(t);i&&i.then||"string"==typeof i?r(i):(n.message="templateProvider为函数时应该返回一个Promise或thenable对象或字符串",a(n))}else e&&e.then?r(e):(n.message="templateProvider不为函数时应该对应一个Promise或thenable对象",a(n))});return r}function w(e,t,n){return e.template?g(e.template,t,n):e.templateUrl?y(e.templateUrl,t,n):e.templateProvider?b(e.templateProvider,t,n):u(function(e,t){n.message="必须存在template, templateUrl, templateProvider中的一个",t(n)})}avalon.router.route=function(e,t,n,r){t=t.trim();for(var a,i=this.routingTable[e],o=0;a=i[o++];){var s=t.match(a.regexp);if(s&&a["abstract"]!==!0){var l={params:{}};return avalon.mix(l.params,a.params),l.keys=a.keys,l.params.query=n||{},s.shift(),a.keys.length&&this._parseArgs(s,l),void(a.stateName?T.transitionTo(T.currentState,a,l.params,r):a.callback.apply(a,s))}}this.errorback&&this.errorback()};var x,$,C={};avalon.router.go=function(e,t,n){var r=T.currentState,a=d.is(e)?e:v(e),t=t||{};t=avalon.mix(!0,{},a.params,t),a&&T.transitionTo(r,a,t,n)};var E=window.$eventManager=avalon.define("$eventManager",function(e){e.$flag=0,e.uiqKey=function(){return e.$flag++,"flag"+e.$flag++}});E.$watch("onAbort",e);var T=window.mmState={prevState:NaN,currentState:NaN,activeState:NaN,oldNodes:[],query:{},popOne:function(e,t,n,r){var a=e.pop(),i=this;if(!a)return n();if(r&&a.onBeforeExit()===!1)return n(!1);i.activeState=a.parentState||x,a.done=function(o){return a._pending=!1,a.done=null,a._local=null,o!==!1&&i.activeState?i.popOne(e,t,n,r):n(o)};var o=a.onExit();!a._pending&&a.done&&a.done(o)},pushOne:function(e,t,n,r,a){var i=e.shift(),o=this;if(!i)return n();if(i.syncParams(t),i.onBeforeEnter()===!1)return i.syncParams(i.oldParams),n(!1);r=s(r),o.activeState=i,i.done=function(a){if(i.done){if(i._pending=!1,i.done=null,i.visited=!0,a===!1)return n(a);var s=i.callback.apply(i,[t,r]);s.$then(function(a){avalon.mix(!0,i.oldParams,i.params),o.pushOne(e,t,n,r)})}};var l=[];avalon.each(i.keys,function(e,t){var n=t.name;l.push(i.params[n])}),i._onEnter.apply(i,l),!i._pending&&i.done&&i.done()},transitionTo:function(e,t,n,r){var a,n=n||t.params;this.activeState&&this.activeState!=this.currentState&&(avalon.log("navigating to ["+this.currentState.stateName+"] will be stopped, redirect to ["+t.stateName+"] now"),this.activeState.done&&this.activeState.done(!1),e=this.activeState,a=!0);var o,l,c=avalon.router.urlFormate(t.url,n,n.query),u=this,r=r||{},d=r.reload,h=e&&e.chain||[],p=t.chain,v=0,m=p[v],g=x.sourceLocal,y=[];if(!d)for(;m&&m===h[v]&&!m.paramsChanged(n);)g=y[v]=m._local,v++,m=p[v];for(var b=h.slice(v),w=p.slice(v),$=g;m=p[v];)g=y[v]=s(g,m.sourceLocal),v++;return T._local=g,done=function(r,a){return o?void 0:(o=!0,u.currentState=u.activeState,r===!1?f("onError",u,{type:"transition",message:"transitionTo "+t.stateName+" faild",error:a,fromState:e,toState:t,params:n},u.currentState):(T.lastLocal=T.currentState._local,x.fire("updateview",u.currentState,l),avalon.log("transitionTo "+t.stateName+" success"),f("onLoad",u,e,t),void 0))},t.path=("/"+c.path).replace(/^[\/]{2,}/g,"/"),d||e!==t||(l=t.paramsChanged(n))?(T.query=avalon.mix({},n.query),!r||r.confirmed||f("onBeforeUnload",this,e,t)!==!1&&i(b,w,e,t)!==!1?void(o!==!0&&(avalon.log("begin transitionTo "+t.stateName+" from "+(e&&e.stateName||"unknown")),f("onUnload",this,e,t),this.currentState=t,this.prevState=e,c&&avalon.history&&avalon.history.updateLocation(c.path+c.query,avalon.mix({},r,{silent:!0}),!e&&location.hash),f("onBegin",this,e,t),this.popOne(b,n,function(e){return e===!1?done(e):void u.pushOne(w,n,done,$,y)},!(r&&r.confirmed)))):f("onAbort",this,e,t)):t==this.activeState&&a?done():void 0}},S={},k=n();window.loadCache=r,avalon.bindingHandlers.view=function(e,t){function n(n,c,f){if(!document.contains(l))return!1;var p,g=i.data("statename")||"",y=v(g)||x;if(s.indexOf("@")<0&&(s+="@"+y.stateName),p=T.currentState._local&&T.currentState._local[s],(!n||p)&&d!==p){d=p,_currentState=p&&p.state;var b=i.data("viewCache"),w=i.data("currentCache");if(p?b=(p.viewCache===!1?!1:p.viewCache||b)&&s+"@"+_currentState.stateName:b&&(b=s+"@__default__"),!(p&&_currentState===c&&p.ignoreChange&&p.ignoreChange(f,s)||b&&b===w)){o(h,a,i,_currentState);var $,C=p?p.template:u;if(b&&(p?p.element=a:T.currentState._local[s]={state:T.currentState,template:u,element:a}),avalon.clearHTML(a),a.removeAttribute("ms-view"),a.setAttribute("ui-view",e.value),b){if($=S[b]?r(b):avalon.parseHTML(C),a.appendChild($),i.data("currentCache",b),S[b])return}else a.innerHTML=C,i.data("currentCache",!1);!p&&b&&i.data("currentCache",b),avalon.each(m(a),function(e,t){avalon(t).data("statename",_currentState&&_currentState.stateName||"")}),avalon.scan(a,(p&&p.vmodels||[]).concat(t||[])),p&&p.$ctrl&&p.$ctrl.$onRendered&&p.$ctrl.$onRendered.apply(a,[p])}}}var a=(T.currentState,e.element),i=avalon(a),s=e.value,l=document.createComment("ms-view:"+s),c=a.parentNode,u=a.innerHTML,f=i.data("statename")||"",d=(v(f)||x,{}),h=a.outerHTML;a.removeAttribute("ms-view"),c.insertBefore(l,a),n("firsttime"),x.watch("updateview",function(e,t){return n.call(this,$,e,t)})},avalon.state=function(e,t){var n=d(e,t);return avalon.router.get(n.url,function(e,t){var r,a,i=this,o=[],s=[],l=[];return n.resolved=u(function(e,t){r=e,a=t}),avalon.each(n.views,function(e,r){var a=i.params,c={type:"view",name:e,params:a,state:n,view:r},f=t[e]={name:e,state:n,params:n.filterParams(a),ignoreChange:"ignoreChange"in r?r.ignoreChange:i.ignoreChange,viewCache:"viewCache"in r?r.viewCache:i.viewCache},d=w(r,a,c);o.push(d),d.then(function(e){f.template=e},avalon.noop);var h,p=function(e){f.vmodels=e.$vmodels,r.$controller=f.$ctrl=e,v()},v=function(){var e=r.$controller&&r.$controller.$onEnter;if(e){var t=u(function(t,r){var i={type:"data",state:n,params:a},o=e(a,t,function(e){i.message=e,r(i)});o&&o.then?(s.push(o),o.then(function(){t(o)})):o&&o!==!0?(i.message=o,r(i)):o===$&&t()});t=t.then(function(e){avalon.isFunction(e)&&l.push(e)}),s.push(t)}};if(r.$controller&&r.cacheController!==!1)return p(r.$controller);if(r.controller)h=d.then(function(){p(avalon.controller(r.controller))});else if(r.controllerUrl)h=u(function(e,t){var n=avalon.isFunction(r.controllerUrl)?r.controllerUrl(a):r.controllerUrl;n=n instanceof Array?n:[n],avalon.controller.loader(n,function(t){d.then(function(){p(t),e()})})});else if(r.controllerProvider){var m=avalon.isFunction(r.controllerProvider)?r.controllerProvider(a):r.controllerProvider;h=u(function(e,t){m&&m.then?(s.push(m),m.then(function(t){d.then(function(){p(t),e()})},function(e){c.message=e,t(c)})):d.then(function(){p(m),e()})})}h&&h.then&&o.push(h)}),u(o).$then(function(e){n._local=t,u(s).$then(function(){avalon.each(l,function(e,t){t()}),r()})}),n.resolved},n),this},Promise.prototype.$then=function(e,t){var n=this.then(e,t);return n["catch"](c),n},avalon.state.onViewEntered=function(e,t){e!=t&&t.parentNode.removeChild(t)},avalon.state.config=function(e){return avalon.mix(avalon.state,e||{}),avalon},d.is=function(e){return e instanceof d},d.prototype={formate:function(e){avalon.mix(!0,this,e);var n=this.stateName,r=this,a=n.split("."),i=a.length-1,o=r.sourceLocal={};this.chain=[],avalon.each(a,function(e,t){if(e==i)r.chain.push(r);else{var n=a.slice(0,e+1).join("."),o=v(n);if(!o)throw new Error("必须先定义"+n);r.chain.push(o)}}),void 0===this.url&&(this["abstract"]=!0);var l=this.chain[i-1]||x;if(l&&(this.url=l.url+(this.url||""),this.parentState=l),!this.views&&""!=n){var c={};"template,templateUrl,templateProvider,controller,controllerUrl,controllerProvider,viewCache".replace(/\w+/g,function(e){t(c,r,e)}),this.views={"":c}}var u={};avalon.each(this.views,function(e,t){e.indexOf("@")<0&&(e+="@"+(l?l.stateName||"":"")),u[e]=t,o[e]={}}),this.views=u,this._self=e,this._pending=!1,this.visited=!1,this.params=s(l&&l.params||{}),this.oldParams={},this.keys=[],this.events={}},watch:function(e,t){var n=this.events[e]||[];return this.events[e]=n,n.push(t),t},fire:function(e,t){for(var n=this.events[e]||[],r=0;n[r];){var a=n[r].apply(this,[].slice.call(arguments,1));a===!1?n.splice(r,1):r++}},unwatch:function(e,t){var n=this.events[e];if(n)for(var r=0;n[r];){if(n[r]==t)return n.splice(r,1);r++}},paramsChanged:function(e){var t=!1,n=this.keys,r=this.params;return avalon.each(n,function(n,a){var i=a.name;r[i]!=e[i]&&(t="param")}),t||T.currentState!==this||(t=!p(e.query,T.query)&&"query"),t},filterParams:function(e){var t=avalon.mix(!0,{},this.params),n=this.keys;return avalon.each(n,function(n,r){t[r.name]=e[r.name]}),t},syncParams:function(e){var t=this;avalon.each(this.keys,function(n,r){var a=r.name;a in e&&(t.params[a]=e[a])})},_onEnter:function(){this.query=this.getQuery();var e=this,t=Array.prototype.slice.call(arguments),n=e._async();u(function(r,a){var i={type:"data",state:e,params:e.params},o=function(t){i.message=t,n.apply(e,[!1]),a(i)},s=function(){n.apply(e),r()},l=e.onEnter.apply(e,t.concat([s,o]));l&&l.then?l.then(s)["catch"](c):l&&l!==!0?o(l):l===$&&s()})},getQuery:function(){return T.query},getParams:function(){return this.params},_async:function(){return this.done&&(this._pending=!0),this.done||avalon.noop},onBeforeEnter:avalon.noop,onEnter:avalon.noop,onBeforeExit:avalon.noop,onExit:avalon.noop},x=d("",{url:"",views:null,"abstract":!0}),avalon.controller=function(){var e=arguments[0],t=arguments[1],n=h();if(avalon.isFunction(e))e(n);else if(avalon.isFunction(t))n.name=e,t(n);else{if("string"!=typeof e&&"object"!=typeof e)throw new Error("参数错误"+arguments);e=e instanceof Array?e:Array.prototype.slice.call(arguments),avalon.each(e,function(t,r){"string"==typeof r&&(e[t]=avalon.vmodels[r]),r=e[t],"$onRendered"in r&&(n.$onRendered=r.$onRendered),"$onEnter"in r&&(n.$onEnter=r.$onEnter)}),n.$vmodels=e}return n},avalon.controller.loader=function(e,t){avalon.require(e,function(e){t&&t(e)})},h.prototype={};var A=function(){return new(window.XMLHttpRequest||ActiveXObject)("Microsoft.XMLHTTP")};avalon.state.templateLoader=function(e,t,n,r){var a=A();a.onreadystatechange=function(){if(4===a.readyState){var i=a.status;i>399&&600>i?(r.message="templateUrl对应资源不存在或没有开启 CORS",r.status=i,r.xhr=a,n(r)):t(avalon.templateCache[e]=a.responseText)}},a.open("GET",e,!0),"withCredentials"in a&&(a.withCredentials=!0),a.setRequestHeader("X-Requested-With","XMLHttpRequest"),a.send()},window._states=C}.apply(t,r),!(void 0!==a&&(e.exports=a))},function(e,t,n){var r,a;r=[n(3)],a=function(e){function t(e){return e}function n(e){throw e}function r(e){return this.then(e,n)}function a(e){return this.then(t,e)}function i(){var e={};return e.promise=new this(function(t,n){e.resolve=t,e.reject=n}),e}function o(e,t){if("boolean"==typeof e.async)var n=e.async;else n=e.async=!0;n?window.setTimeout(t,0):t()}function s(e,t){if("pending"===e._state)if(t&&"function"==typeof t.then){var n=t instanceof f?"_then":"then";t[n](function(t){c(e,t,!0)},function(t){c(e,t,!1)})}else c(e,t,!0)}function l(e,t){"pending"===e._state&&c(e,t,!1)}function c(e,t,n){e._fired=!0,e._value=t,e._state=n?"fulfilled":"rejected",o(e,function(){e._callbacks.forEach(function(t){e._fire(t.onSuccess,t.onFail)})})}function u(e,t){t=Array.isArray(t)?t:[];var n,r=0,a=[];return new f(function(i,o){function s(s,l){s.then(function(o){n||(a[l]=o,r++,(e||r>=t.length)&&(i(e?o:a),n=!0))},function(e){n=!0,o(e)})}t.length||i();for(var l=0,c=t.length;c>l;l++)s(t[l],l)})}var f=function(e){this._callbacks=[];var t=this;if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");e(function(e){s(t,e)},function(e){l(t,e)})};f.resolve=function(e){return new f(function(t){t(e)})},f.reject=function(e){return new f(function(t,n){n(e)})},f.prototype={constructor:f,_state:"pending",_fired:!1,_fire:function(e,t){if("rejected"===this._state){if("function"!=typeof t)throw this._value;t(this._value)}else"function"==typeof e&&e(this._value)},_then:function(e,t){if(this._fired){var n=this;o(n,function(){n._fire(e,t)})}else this._callbacks.push({onSuccess:e,onFail:t})},then:function(e,r){e="function"==typeof e?e:t,r="function"==typeof r?r:n;var a=this,i=new f(function(t,n){a._then(function(r){try{r=e(r)}catch(a){return void n(a)}t(r)},function(e){try{e=r(e)}catch(a){return void n(a)}t(e)})});for(var o in a)d[o]||(i[o]=a[o]);return i},done:r,"catch":a,fail:a};var d={_state:1,_fired:1,_value:1,_callbacks:1};f.all=function(e){return u(!1,e)},f.race=function(e){return u(!0,e)},f.defer=i,e.Promise=f;var h=window.Promise;return/native code/.test(h)&&(h.prototype.done=r,h.prototype.fail=a,h.defer||(h.defer=i)),window.Promise=h||f}.apply(t,r),!(void 0!==a&&(e.exports=a))},function(e,t){var n=function(){function e(e){return null==e?String(e):z[Y.call(e)]||"object"}function t(t){return"function"==e(t)}function n(e){return null!=e&&e==e.window}function r(e){return null!=e&&e.nodeType==e.DOCUMENT_NODE}function a(t){return"object"==e(t)}function i(e){return a(e)&&!n(e)&&Object.getPrototypeOf(e)==Object.prototype}function o(e){return"number"==typeof e.length}function s(e){return N.call(e,function(e){return null!=e})}function l(e){return e.length>0?C.fn.concat.apply([],e):e}function c(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function u(e){return e in j?j[e]:j[e]=new RegExp("(^|\\s)"+e+"(\\s|$)")}function f(e,t){return"number"!=typeof t||L[c(e)]?t:t+"px"}function d(e){var t,n;return O[e]||(t=M.createElement(e),M.body.appendChild(t),n=getComputedStyle(t,"").getPropertyValue("display"),t.parentNode.removeChild(t),"none"==n&&(n="block"),O[e]=n),O[e]}function h(e){return"children"in e?A.call(e.children):C.map(e.childNodes,function(e){return 1==e.nodeType?e:void 0})}function p(e,t,n){for($ in t)n&&(i(t[$])||G(t[$]))?(i(t[$])&&!i(e[$])&&(e[$]={}),G(t[$])&&!G(e[$])&&(e[$]=[]),p(e[$],t[$],n)):t[$]!==x&&(e[$]=t[$])}function v(e,t){return null==t?C(e):C(e).filter(t)}function m(e,n,r,a){return t(n)?n.call(e,r,a):n}function g(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}function y(e,t){var n=e.className||"",r=n&&n.baseVal!==x;return t===x?r?n.baseVal:n:void(r?n.baseVal=t:e.className=t)}function b(e){try{return e?"true"==e||("false"==e?!1:"null"==e?null:+e+""==e?+e:/^[\[\{]/.test(e)?C.parseJSON(e):e):e}catch(t){return e}}function w(e,t){t(e);for(var n=0,r=e.childNodes.length;r>n;n++)w(e.childNodes[n],t)}var x,$,C,E,T,S,k=[],A=k.slice,N=k.filter,M=window.document,O={},j={},L={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},_=/^\s*<(\w+|!)[^>]*>/,P=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,H=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,D=/^(?:body|html)$/i,I=/([A-Z])/g,R=["val","css","html","text","data","width","height","offset"],F=["after","prepend","before","append"],B=M.createElement("table"),V=M.createElement("tr"),q={tr:M.createElement("tbody"),tbody:B,thead:B,tfoot:B,td:V,th:V,"*":M.createElement("div")},U=/complete|loaded|interactive/,X=/^[\w-]*$/,z={},Y=z.toString,W={},Z=M.createElement("div"),J={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},G=Array.isArray||function(e){return e instanceof Array};return W.matches=function(e,t){if(!t||!e||1!==e.nodeType)return!1;var n=e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector;if(n)return n.call(e,t);var r,a=e.parentNode,i=!a;return i&&(a=Z).appendChild(e),r=~W.qsa(a,t).indexOf(e),i&&Z.removeChild(e),r},T=function(e){return e.replace(/-+(.)?/g,function(e,t){return t?t.toUpperCase():""})},S=function(e){return N.call(e,function(t,n){return e.indexOf(t)==n})},W.fragment=function(e,t,n){var r,a,o;return P.test(e)&&(r=C(M.createElement(RegExp.$1))),r||(e.replace&&(e=e.replace(H,"<$1></$2>")),t===x&&(t=_.test(e)&&RegExp.$1),t in q||(t="*"),o=q[t],o.innerHTML=""+e,r=C.each(A.call(o.childNodes),function(){o.removeChild(this)})),i(n)&&(a=C(r),C.each(n,function(e,t){R.indexOf(e)>-1?a[e](t):a.attr(e,t)})),r},W.Z=function(e,t){return e=e||[],e.__proto__=C.fn,e.selector=t||"",e},W.isZ=function(e){return e instanceof W.Z},W.init=function(e,n){var r;if(!e)return W.Z();if("string"==typeof e)if(e=e.trim(),"<"==e[0]&&_.test(e))r=W.fragment(e,RegExp.$1,n),e=null;else{if(n!==x)return C(n).find(e);r=W.qsa(M,e)}else{if(t(e))return C(M).ready(e);if(W.isZ(e))return e;if(G(e))r=s(e);else if(a(e))r=[e],e=null;else if(_.test(e))r=W.fragment(e.trim(),RegExp.$1,n),e=null;else{if(n!==x)return C(n).find(e);r=W.qsa(M,e)}}return W.Z(r,e)},C=function(e,t){return W.init(e,t)},C.extend=function(e){var t,n=A.call(arguments,1);return"boolean"==typeof e&&(t=e,e=n.shift()),n.forEach(function(n){p(e,n,t)}),e},W.qsa=function(e,t){var n,a="#"==t[0],i=!a&&"."==t[0],o=a||i?t.slice(1):t,s=X.test(o);return r(e)&&s&&a?(n=e.getElementById(o))?[n]:[]:1!==e.nodeType&&9!==e.nodeType?[]:A.call(s&&!a?i?e.getElementsByClassName(o):e.getElementsByTagName(t):e.querySelectorAll(t))},C.contains=M.documentElement.contains?function(e,t){return e!==t&&e.contains(t)}:function(e,t){for(;t&&(t=t.parentNode);)if(t===e)return!0;return!1},C.type=e,C.isFunction=t,C.isWindow=n,C.isArray=G,C.isPlainObject=i,C.isEmptyObject=function(e){var t;for(t in e)return!1;return!0},C.inArray=function(e,t,n){return k.indexOf.call(t,e,n)},C.camelCase=T,C.trim=function(e){return null==e?"":String.prototype.trim.call(e)},C.uuid=0,C.support={},C.expr={},C.map=function(e,t){var n,r,a,i=[];if(o(e))for(r=0;r<e.length;r++)n=t(e[r],r),null!=n&&i.push(n);else for(a in e)n=t(e[a],a),null!=n&&i.push(n);return l(i)},C.each=function(e,t){var n,r;if(o(e)){for(n=0;n<e.length;n++)if(t.call(e[n],n,e[n])===!1)return e}else for(r in e)if(t.call(e[r],r,e[r])===!1)return e;return e},C.grep=function(e,t){return N.call(e,t)},window.JSON&&(C.parseJSON=JSON.parse),C.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){z["[object "+t+"]"]=t.toLowerCase()}),C.fn={forEach:k.forEach,reduce:k.reduce,push:k.push,sort:k.sort,indexOf:k.indexOf,concat:k.concat,map:function(e){return C(C.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return C(A.apply(this,arguments))},ready:function(e){return U.test(M.readyState)&&M.body?e(C):M.addEventListener("DOMContentLoaded",function(){e(C)},!1),this},get:function(e){return e===x?A.call(this):this[e>=0?e:e+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(e){return k.every.call(this,function(t,n){return e.call(t,n,t)!==!1}),this},filter:function(e){return t(e)?this.not(this.not(e)):C(N.call(this,function(t){return W.matches(t,e)}))},add:function(e,t){return C(S(this.concat(C(e,t))))},is:function(e){return this.length>0&&W.matches(this[0],e)},not:function(e){var n=[];if(t(e)&&e.call!==x)this.each(function(t){e.call(this,t)||n.push(this)});else{var r="string"==typeof e?this.filter(e):o(e)&&t(e.item)?A.call(e):C(e);this.forEach(function(e){r.indexOf(e)<0&&n.push(e)})}return C(n)},has:function(e){return this.filter(function(){return a(e)?C.contains(this,e):C(this).find(e).size()})},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){var e=this[0];return e&&!a(e)?e:C(e)},last:function(){var e=this[this.length-1];return e&&!a(e)?e:C(e)},find:function(e){var t,n=this;return t=e?"object"==typeof e?C(e).filter(function(){var e=this;return k.some.call(n,function(t){return C.contains(t,e)})}):1==this.length?C(W.qsa(this[0],e)):this.map(function(){return W.qsa(this,e)}):C()},closest:function(e,t){var n=this[0],a=!1;for("object"==typeof e&&(a=C(e));n&&!(a?a.indexOf(n)>=0:W.matches(n,e));)n=n!==t&&!r(n)&&n.parentNode;return C(n)},parents:function(e){for(var t=[],n=this;n.length>0;)n=C.map(n,function(e){return(e=e.parentNode)&&!r(e)&&t.indexOf(e)<0?(t.push(e),
e):void 0});return v(t,e)},parent:function(e){return v(S(this.pluck("parentNode")),e)},children:function(e){return v(this.map(function(){return h(this)}),e)},contents:function(){return this.map(function(){return A.call(this.childNodes)})},siblings:function(e){return v(this.map(function(e,t){return N.call(h(t.parentNode),function(e){return e!==t})}),e)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(e){return C.map(this,function(t){return t[e]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=d(this.nodeName))})},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){var n=t(e);if(this[0]&&!n)var r=C(e).get(0),a=r.parentNode||this.length>1;return this.each(function(t){C(this).wrapAll(n?e.call(this,t):a?r.cloneNode(!0):r)})},wrapAll:function(e){if(this[0]){C(this[0]).before(e=C(e));for(var t;(t=e.children()).length;)e=t.first();C(e).append(this)}return this},wrapInner:function(e){var n=t(e);return this.each(function(t){var r=C(this),a=r.contents(),i=n?e.call(this,t):e;a.length?a.wrapAll(i):r.append(i)})},unwrap:function(){return this.parent().each(function(){C(this).replaceWith(C(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(e){return this.each(function(){var t=C(this);(e===x?"none"==t.css("display"):e)?t.show():t.hide()})},prev:function(e){return C(this.pluck("previousElementSibling")).filter(e||"*")},next:function(e){return C(this.pluck("nextElementSibling")).filter(e||"*")},html:function(e){return 0 in arguments?this.each(function(t){var n=this.innerHTML;C(this).empty().append(m(this,e,t,n))}):0 in this?this[0].innerHTML:null},text:function(e){return 0 in arguments?this.each(function(t){var n=m(this,e,t,this.textContent);this.textContent=null==n?"":""+n}):0 in this?this[0].textContent:null},attr:function(e,t){var n;return"string"!=typeof e||1 in arguments?this.each(function(n){if(1===this.nodeType)if(a(e))for($ in e)g(this,$,e[$]);else g(this,e,m(this,t,n,this.getAttribute(e)))}):this.length&&1===this[0].nodeType?!(n=this[0].getAttribute(e))&&e in this[0]?this[0][e]:n:x},removeAttr:function(e){return this.each(function(){1===this.nodeType&&e.split(" ").forEach(function(e){g(this,e)},this)})},prop:function(e,t){return e=J[e]||e,1 in arguments?this.each(function(n){this[e]=m(this,t,n,this[e])}):this[0]&&this[0][e]},data:function(e,t){var n="data-"+e.replace(I,"-$1").toLowerCase(),r=1 in arguments?this.attr(n,t):this.attr(n);return null!==r?b(r):x},val:function(e){return 0 in arguments?this.each(function(t){this.value=m(this,e,t,this.value)}):this[0]&&(this[0].multiple?C(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(e){if(e)return this.each(function(t){var n=C(this),r=m(this,e,t,n.offset()),a=n.offsetParent().offset(),i={top:r.top-a.top,left:r.left-a.left};"static"==n.css("position")&&(i.position="relative"),n.css(i)});if(!this.length)return null;var t=this[0].getBoundingClientRect();return{left:t.left+window.pageXOffset,top:t.top+window.pageYOffset,width:Math.round(t.width),height:Math.round(t.height)}},css:function(t,n){if(arguments.length<2){var r,a=this[0];if(!a)return;if(r=getComputedStyle(a,""),"string"==typeof t)return a.style[T(t)]||r.getPropertyValue(t);if(G(t)){var i={};return C.each(t,function(e,t){i[t]=a.style[T(t)]||r.getPropertyValue(t)}),i}}var o="";if("string"==e(t))n||0===n?o=c(t)+":"+f(t,n):this.each(function(){this.style.removeProperty(c(t))});else for($ in t)t[$]||0===t[$]?o+=c($)+":"+f($,t[$])+";":this.each(function(){this.style.removeProperty(c($))});return this.each(function(){this.style.cssText+=";"+o})},index:function(e){return e?this.indexOf(C(e)[0]):this.parent().children().indexOf(this[0])},hasClass:function(e){return e?k.some.call(this,function(e){return this.test(y(e))},u(e)):!1},addClass:function(e){return e?this.each(function(t){if("className"in this){E=[];var n=y(this),r=m(this,e,t,n);r.split(/\s+/g).forEach(function(e){C(this).hasClass(e)||E.push(e)},this),E.length&&y(this,n+(n?" ":"")+E.join(" "))}}):this},removeClass:function(e){return this.each(function(t){if("className"in this){if(e===x)return y(this,"");E=y(this),m(this,e,t,E).split(/\s+/g).forEach(function(e){E=E.replace(u(e)," ")}),y(this,E.trim())}})},toggleClass:function(e,t){return e?this.each(function(n){var r=C(this),a=m(this,e,n,y(this));a.split(/\s+/g).forEach(function(e){(t===x?!r.hasClass(e):t)?r.addClass(e):r.removeClass(e)})}):this},scrollTop:function(e){if(this.length){var t="scrollTop"in this[0];return e===x?t?this[0].scrollTop:this[0].pageYOffset:this.each(t?function(){this.scrollTop=e}:function(){this.scrollTo(this.scrollX,e)})}},scrollLeft:function(e){if(this.length){var t="scrollLeft"in this[0];return e===x?t?this[0].scrollLeft:this[0].pageXOffset:this.each(t?function(){this.scrollLeft=e}:function(){this.scrollTo(e,this.scrollY)})}},position:function(){if(this.length){var e=this[0],t=this.offsetParent(),n=this.offset(),r=D.test(t[0].nodeName)?{top:0,left:0}:t.offset();return n.top-=parseFloat(C(e).css("margin-top"))||0,n.left-=parseFloat(C(e).css("margin-left"))||0,r.top+=parseFloat(C(t[0]).css("border-top-width"))||0,r.left+=parseFloat(C(t[0]).css("border-left-width"))||0,{top:n.top-r.top,left:n.left-r.left}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||M.body;e&&!D.test(e.nodeName)&&"static"==C(e).css("position");)e=e.offsetParent;return e})}},C.fn.detach=C.fn.remove,["width","height"].forEach(function(e){var t=e.replace(/./,function(e){return e[0].toUpperCase()});C.fn[e]=function(a){var i,o=this[0];return a===x?n(o)?o["inner"+t]:r(o)?o.documentElement["scroll"+t]:(i=this.offset())&&i[e]:this.each(function(t){o=C(this),o.css(e,m(this,a,t,o[e]()))})}}),F.forEach(function(t,n){var r=n%2;C.fn[t]=function(){var t,a,i=C.map(arguments,function(n){return t=e(n),"object"==t||"array"==t||null==n?n:W.fragment(n)}),o=this.length>1;return i.length<1?this:this.each(function(e,t){a=r?t:t.parentNode,t=0==n?t.nextSibling:1==n?t.firstChild:2==n?t:null;var s=C.contains(M.documentElement,a);i.forEach(function(e){if(o)e=e.cloneNode(!0);else if(!a)return C(e).remove();a.insertBefore(e,t),s&&w(e,function(e){null==e.nodeName||"SCRIPT"!==e.nodeName.toUpperCase()||e.type&&"text/javascript"!==e.type||e.src||window.eval.call(window,e.innerHTML)})})})},C.fn[r?t+"To":"insert"+(n?"Before":"After")]=function(e){return C(e)[t](this),this}}),W.Z.prototype=C.fn,W.uniq=S,W.deserializeValue=b,C.zepto=W,C}();window.Zepto=n,void 0===window.$&&(window.$=n),function(e){function t(e){return e._zid||(e._zid=d++)}function n(e,n,i,o){if(n=r(n),n.ns)var s=a(n.ns);return(m[t(e)]||[]).filter(function(e){return!(!e||n.e&&e.e!=n.e||n.ns&&!s.test(e.ns)||i&&t(e.fn)!==t(i)||o&&e.sel!=o)})}function r(e){var t=(""+e).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function a(e){return new RegExp("(?:^| )"+e.replace(" "," .* ?")+"(?: |$)")}function i(e,t){return e.del&&!y&&e.e in b||!!t}function o(e){return w[e]||y&&b[e]||e}function s(n,a,s,l,u,d,h){var p=t(n),v=m[p]||(m[p]=[]);a.split(/\s/).forEach(function(t){if("ready"==t)return e(document).ready(s);var a=r(t);a.fn=s,a.sel=u,a.e in w&&(s=function(t){var n=t.relatedTarget;return!n||n!==this&&!e.contains(this,n)?a.fn.apply(this,arguments):void 0}),a.del=d;var p=d||s;a.proxy=function(e){if(e=c(e),!e.isImmediatePropagationStopped()){e.data=l;var t=p.apply(n,e._args==f?[e]:[e].concat(e._args));return t===!1&&(e.preventDefault(),e.stopPropagation()),t}},a.i=v.length,v.push(a),"addEventListener"in n&&n.addEventListener(o(a.e),a.proxy,i(a,h))})}function l(e,r,a,s,l){var c=t(e);(r||"").split(/\s/).forEach(function(t){n(e,t,a,s).forEach(function(t){delete m[c][t.i],"removeEventListener"in e&&e.removeEventListener(o(t.e),t.proxy,i(t,l))})})}function c(t,n){return(n||!t.isDefaultPrevented)&&(n||(n=t),e.each(E,function(e,r){var a=n[e];t[e]=function(){return this[r]=x,a&&a.apply(n,arguments)},t[r]=$}),(n.defaultPrevented!==f?n.defaultPrevented:"returnValue"in n?n.returnValue===!1:n.getPreventDefault&&n.getPreventDefault())&&(t.isDefaultPrevented=x)),t}function u(e){var t,n={originalEvent:e};for(t in e)C.test(t)||e[t]===f||(n[t]=e[t]);return c(n,e)}var f,d=1,h=Array.prototype.slice,p=e.isFunction,v=function(e){return"string"==typeof e},m={},g={},y="onfocusin"in window,b={focus:"focusin",blur:"focusout"},w={mouseenter:"mouseover",mouseleave:"mouseout"};g.click=g.mousedown=g.mouseup=g.mousemove="MouseEvents",e.event={add:s,remove:l},e.proxy=function(n,r){var a=2 in arguments&&h.call(arguments,2);if(p(n)){var i=function(){return n.apply(r,a?a.concat(h.call(arguments)):arguments)};return i._zid=t(n),i}if(v(r))return a?(a.unshift(n[r],n),e.proxy.apply(null,a)):e.proxy(n[r],n);throw new TypeError("expected function")},e.fn.bind=function(e,t,n){return this.on(e,t,n)},e.fn.unbind=function(e,t){return this.off(e,t)},e.fn.one=function(e,t,n,r){return this.on(e,t,n,r,1)};var x=function(){return!0},$=function(){return!1},C=/^([A-Z]|returnValue$|layer[XY]$)/,E={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};e.fn.delegate=function(e,t,n){return this.on(t,e,n)},e.fn.undelegate=function(e,t,n){return this.off(t,e,n)},e.fn.live=function(t,n){return e(document.body).delegate(this.selector,t,n),this},e.fn.die=function(t,n){return e(document.body).undelegate(this.selector,t,n),this},e.fn.on=function(t,n,r,a,i){var o,c,d=this;return t&&!v(t)?(e.each(t,function(e,t){d.on(e,n,r,t,i)}),d):(v(n)||p(a)||a===!1||(a=r,r=n,n=f),(p(r)||r===!1)&&(a=r,r=f),a===!1&&(a=$),d.each(function(f,d){i&&(o=function(e){return l(d,e.type,a),a.apply(this,arguments)}),n&&(c=function(t){var r,i=e(t.target).closest(n,d).get(0);return i&&i!==d?(r=e.extend(u(t),{currentTarget:i,liveFired:d}),(o||a).apply(i,[r].concat(h.call(arguments,1)))):void 0}),s(d,t,a,r,n,c||o)}))},e.fn.off=function(t,n,r){var a=this;return t&&!v(t)?(e.each(t,function(e,t){a.off(e,n,t)}),a):(v(n)||p(r)||r===!1||(r=n,n=f),r===!1&&(r=$),a.each(function(){l(this,t,r,n)}))},e.fn.trigger=function(t,n){return t=v(t)||e.isPlainObject(t)?e.Event(t):c(t),t._args=n,this.each(function(){t.type in b&&"function"==typeof this[t.type]?this[t.type]():"dispatchEvent"in this?this.dispatchEvent(t):e(this).triggerHandler(t,n)})},e.fn.triggerHandler=function(t,r){var a,i;return this.each(function(o,s){a=u(v(t)?e.Event(t):t),a._args=r,a.target=s,e.each(n(s,t.type||t),function(e,t){return i=t.proxy(a),a.isImmediatePropagationStopped()?!1:void 0})}),i},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(t){e.fn[t]=function(e){return 0 in arguments?this.bind(t,e):this.trigger(t)}}),e.Event=function(e,t){v(e)||(t=e,e=t.type);var n=document.createEvent(g[e]||"Events"),r=!0;if(t)for(var a in t)"bubbles"==a?r=!!t[a]:n[a]=t[a];return n.initEvent(e,r,!0),c(n)}}(n),function(e){function t(t,n,r){var a=e.Event(n);return e(t).trigger(a,r),!a.isDefaultPrevented()}function n(e,n,r,a){return e.global?t(n||y,r,a):void 0}function r(t){t.global&&0===e.active++&&n(t,null,"ajaxStart")}function a(t){t.global&&!--e.active&&n(t,null,"ajaxStop")}function i(e,t){var r=t.context;return t.beforeSend.call(r,e,t)===!1||n(t,r,"ajaxBeforeSend",[e,t])===!1?!1:void n(t,r,"ajaxSend",[e,t])}function o(e,t,r,a){var i=r.context,o="success";r.success.call(i,e,o,t),a&&a.resolveWith(i,[e,o,t]),n(r,i,"ajaxSuccess",[t,r,e]),l(o,t,r)}function s(e,t,r,a,i){var o=a.context;a.error.call(o,r,t,e),i&&i.rejectWith(o,[r,t,e]),n(a,o,"ajaxError",[r,a,e||t]),l(t,r,a)}function l(e,t,r){var i=r.context;r.complete.call(i,t,e),n(r,i,"ajaxComplete",[t,r]),a(r)}function c(){}function u(e){return e&&(e=e.split(";",2)[0]),e&&(e==C?"html":e==$?"json":w.test(e)?"script":x.test(e)&&"xml")||"text"}function f(e,t){return""==t?e:(e+"&"+t).replace(/[&?]{1,2}/,"?")}function d(t){t.processData&&t.data&&"string"!=e.type(t.data)&&(t.data=e.param(t.data,t.traditional)),!t.data||t.type&&"GET"!=t.type.toUpperCase()||(t.url=f(t.url,t.data),t.data=void 0)}function h(t,n,r,a){return e.isFunction(n)&&(a=r,r=n,n=void 0),e.isFunction(r)||(a=r,r=void 0),{url:t,data:n,success:r,dataType:a}}function p(t,n,r,a){var i,o=e.isArray(n),s=e.isPlainObject(n);e.each(n,function(n,l){i=e.type(l),a&&(n=r?a:a+"["+(s||"object"==i||"array"==i?n:"")+"]"),!a&&o?t.add(l.name,l.value):"array"==i||!r&&"object"==i?p(t,l,r,n):t.add(n,l)})}var v,m,g=0,y=window.document,b=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,w=/^(?:text|application)\/javascript/i,x=/^(?:text|application)\/xml/i,$="application/json",C="text/html",E=/^\s*$/,T=y.createElement("a");T.href=window.location.href,e.active=0,e.ajaxJSONP=function(t,n){if(!("type"in t))return e.ajax(t);var r,a,l=t.jsonpCallback,c=(e.isFunction(l)?l():l)||"jsonp"+ ++g,u=y.createElement("script"),f=window[c],d=function(t){e(u).triggerHandler("error",t||"abort")},h={abort:d};return n&&n.promise(h),e(u).on("load error",function(i,l){clearTimeout(a),e(u).off().remove(),"error"!=i.type&&r?o(r[0],h,t,n):s(null,l||"error",h,t,n),window[c]=f,r&&e.isFunction(f)&&f(r[0]),f=r=void 0}),i(h,t)===!1?(d("abort"),h):(window[c]=function(){r=arguments},u.src=t.url.replace(/\?(.+)=\?/,"?$1="+c),y.head.appendChild(u),t.timeout>0&&(a=setTimeout(function(){d("timeout")},t.timeout)),h)},e.ajaxSettings={type:"GET",beforeSend:c,success:c,error:c,complete:c,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:$,xml:"application/xml, text/xml",html:C,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0},e.ajax=function(t){var n,a=e.extend({},t||{}),l=e.Deferred&&e.Deferred();for(v in e.ajaxSettings)void 0===a[v]&&(a[v]=e.ajaxSettings[v]);r(a),a.crossDomain||(n=y.createElement("a"),n.href=a.url,n.href=n.href,a.crossDomain=T.protocol+"//"+T.host!=n.protocol+"//"+n.host),a.url||(a.url=window.location.toString()),d(a);var h=a.dataType,p=/\?.+=\?/.test(a.url);if(p&&(h="jsonp"),a.cache!==!1&&(t&&t.cache===!0||"script"!=h&&"jsonp"!=h)||(a.url=f(a.url,"_="+Date.now())),"jsonp"==h)return p||(a.url=f(a.url,a.jsonp?a.jsonp+"=?":a.jsonp===!1?"":"callback=?")),e.ajaxJSONP(a,l);var g,b=a.accepts[h],w={},x=function(e,t){w[e.toLowerCase()]=[e,t]},$=/^([\w-]+:)\/\//.test(a.url)?RegExp.$1:window.location.protocol,C=a.xhr(),S=C.setRequestHeader;if(l&&l.promise(C),a.crossDomain||x("X-Requested-With","XMLHttpRequest"),x("Accept",b||"*/*"),(b=a.mimeType||b)&&(b.indexOf(",")>-1&&(b=b.split(",",2)[0]),C.overrideMimeType&&C.overrideMimeType(b)),(a.contentType||a.contentType!==!1&&a.data&&"GET"!=a.type.toUpperCase())&&x("Content-Type",a.contentType||"application/x-www-form-urlencoded"),a.headers)for(m in a.headers)x(m,a.headers[m]);if(C.setRequestHeader=x,C.onreadystatechange=function(){if(4==C.readyState){C.onreadystatechange=c,clearTimeout(g);var t,n=!1;if(C.status>=200&&C.status<300||304==C.status||0==C.status&&"file:"==$){h=h||u(a.mimeType||C.getResponseHeader("content-type")),t=C.responseText;try{"script"==h?(0,eval)(t):"xml"==h?t=C.responseXML:"json"==h&&(t=E.test(t)?null:e.parseJSON(t))}catch(r){n=r}n?s(n,"parsererror",C,a,l):o(t,C,a,l)}else s(C.statusText||null,C.status?"error":"abort",C,a,l)}},i(C,a)===!1)return C.abort(),s(null,"abort",C,a,l),C;if(a.xhrFields)for(m in a.xhrFields)C[m]=a.xhrFields[m];var k="async"in a?a.async:!0;C.open(a.type,a.url,k,a.username,a.password);for(m in w)S.apply(C,w[m]);return a.timeout>0&&(g=setTimeout(function(){C.onreadystatechange=c,C.abort(),s(null,"timeout",C,a,l)},a.timeout)),C.send(a.data?a.data:null),C},e.get=function(){return e.ajax(h.apply(null,arguments))},e.post=function(){var t=h.apply(null,arguments);return t.type="POST",e.ajax(t)},e.getJSON=function(){var t=h.apply(null,arguments);return t.dataType="json",e.ajax(t)},e.fn.load=function(t,n,r){if(!this.length)return this;var a,i=this,o=t.split(/\s/),s=h(t,n,r),l=s.success;return o.length>1&&(s.url=o[0],a=o[1]),s.success=function(t){i.html(a?e("<div>").html(t.replace(b,"")).find(a):t),l&&l.apply(i,arguments)},e.ajax(s),this};var S=encodeURIComponent;e.param=function(t,n){var r=[];return r.add=function(t,n){e.isFunction(n)&&(n=n()),null==n&&(n=""),this.push(S(t)+"="+S(n))},p(r,t,n),r.join("&").replace(/%20/g,"+")}}(n),function(e){e.fn.serializeArray=function(){var t,n,r=[],a=function(e){return e.forEach?e.forEach(a):void r.push({name:t,value:e})};return this[0]&&e.each(this[0].elements,function(r,i){n=i.type,t=i.name,t&&"fieldset"!=i.nodeName.toLowerCase()&&!i.disabled&&"submit"!=n&&"reset"!=n&&"button"!=n&&"file"!=n&&("radio"!=n&&"checkbox"!=n||i.checked)&&a(e(i).val())}),r},e.fn.serialize=function(){var e=[];return this.serializeArray().forEach(function(t){e.push(encodeURIComponent(t.name)+"="+encodeURIComponent(t.value))}),e.join("&")},e.fn.submit=function(t){if(0 in arguments)this.bind("submit",t);else if(this.length){var n=e.Event("submit");this.eq(0).trigger(n),n.isDefaultPrevented()||this.get(0).submit()}return this}}(n),function(e){"__proto__"in{}||e.extend(e.zepto,{Z:function(t,n){return t=t||[],e.extend(t,e.fn),t.selector=n||"",t.__Z=!0,t},isZ:function(t){return"array"===e.type(t)&&"__Z"in t}});try{getComputedStyle(void 0)}catch(t){var n=getComputedStyle;window.getComputedStyle=function(e){try{return n(e)}catch(t){return null}}}}(n),e.exports=n}]);